/*!
 * qrcode-tool v1.0.0
 * qrcode component
 * https://passer-by.com/widget-qrcode/
 *
 * Copyright (c) 2024-present, HaoLe Zheng
 *
 * Released under the MIT License
 * https://github.com/mumuy/widget-qrcode
 *
 * Created on: 2024-05-26
 */
!function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,r){if(t){if("string"==typeof t)return e(t,r);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,r):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var a=o.call(e,t||"default");if("object"!==r(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===r(t)?t:String(t)}function a(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,o(a.key),a)}}function n(e,t){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},n(e,t)}function i(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function u(e,t,r){return u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct.bind():function(e,t,r){var o=[null];o.push.apply(o,t);var a=new(Function.bind.apply(e,o));return r&&n(a,r.prototype),a},u.apply(null,arguments)}function g(e){var t="function"==typeof Map?new Map:void 0;return g=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return u(e,arguments,l(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),n(r,e)},g(e)}var s={L:1,M:0,Q:3,H:2},f=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],c=1,h=2,d=4,v=8;function m(e){this.mode=d,this.data=e,this.parsedData=[];for(var t=0,r=this.data.length;t<r;t++){var o=[],a=this.data.charCodeAt(t);a>65536?(o[0]=240|(1835008&a)>>>18,o[1]=128|(258048&a)>>>12,o[2]=128|(4032&a)>>>6,o[3]=128|63&a):a>2048?(o[0]=224|(61440&a)>>>12,o[1]=128|(4032&a)>>>6,o[2]=128|63&a):a>128?(o[0]=192|(1984&a)>>>6,o[1]=128|63&a):o[0]=a,this.parsedData.push(o)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function b(){this.buffer=[],this.length=0}m.prototype={getLength:function(e){return this.parsedData.length},write:function(e){for(var t=0,r=this.parsedData.length;t<r;t++)e.put(this.parsedData[t],8)}},b.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var r=0;r<t;r++)this.putBit(1==(e>>>t-r-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};for(var P={glog:function(e){if(e<1)throw new Error("glog("+e+")");return P.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return P.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},I=0;I<8;I++)P.EXP_TABLE[I]=1<<I;for(var y=8;y<256;y++)P.EXP_TABLE[y]=P.EXP_TABLE[y-4]^P.EXP_TABLE[y-5]^P.EXP_TABLE[y-6]^P.EXP_TABLE[y-8];for(var p=0;p<255;p++)P.LOG_TABLE[P.EXP_TABLE[p]]=p;function k(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var r=0;r<e.length&&0==e[r];)r++;this.num=new Array(e.length-r+t);for(var o=0;o<e.length-r;o++)this.num[o]=e[o+r]}function w(e,t){this.totalCount=e,this.dataCount=t}k.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),r=0;r<this.getLength();r++)for(var o=0;o<e.getLength();o++)t[r+o]^=P.gexp(P.glog(this.get(r))+P.glog(e.get(o)));return new k(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=P.glog(this.get(0))-P.glog(e.get(0)),r=new Array(this.getLength()),o=0;o<this.getLength();o++)r[o]=this.get(o);for(var a=0;a<e.getLength();a++)r[a]^=P.gexp(P.glog(e.get(a))+t);return new k(r,0).mod(e)}},w.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],w.getRSBlocks=function(e,t){var r=w.getRsBlockTable(e,t);if(null==r)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var o=r.length/3,a=[],n=0;n<o;n++)for(var i=r[3*n+0],l=r[3*n+1],u=r[3*n+2],g=0;g<i;g++)a.push(new w(l,u));return a},w.getRsBlockTable=function(e,t){switch(t){case s.L:return w.RS_BLOCK_TABLE[4*(e-1)+0];case s.M:return w.RS_BLOCK_TABLE[4*(e-1)+1];case s.Q:return w.RS_BLOCK_TABLE[4*(e-1)+2];case s.H:return w.RS_BLOCK_TABLE[4*(e-1)+3];default:return}};var C=0,T=1,S=2,R=3,M=4,B=5,A=6,L=7,D={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;D.getBCHDigit(t)-D.getBCHDigit(D.G15)>=0;)t^=D.G15<<D.getBCHDigit(t)-D.getBCHDigit(D.G15);return(e<<10|t)^D.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;D.getBCHDigit(t)-D.getBCHDigit(D.G18)>=0;)t^=D.G18<<D.getBCHDigit(t)-D.getBCHDigit(D.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return D.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,r){switch(e){case C:return(t+r)%2==0;case T:return t%2==0;case S:return r%3==0;case R:return(t+r)%3==0;case M:return(Math.floor(t/2)+Math.floor(r/3))%2==0;case B:return t*r%2+t*r%3==0;case A:return(t*r%2+t*r%3)%2==0;case L:return(t*r%3+(t+r)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new k([1],0),r=0;r<e;r++)t=t.multiply(new k([1,P.gexp(r)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case c:return 10;case h:return 9;case d:case v:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case c:return 12;case h:return 11;case d:return 16;case v:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case c:return 14;case h:return 13;case d:return 16;case v:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),r=0,o=0;o<t;o++)for(var a=0;a<t;a++){for(var n=0,i=e.isDark(o,a),l=-1;l<=1;l++)if(!(o+l<0||t<=o+l))for(var u=-1;u<=1;u++)a+u<0||t<=a+u||0==l&&0==u||i==e.isDark(o+l,a+u)&&n++;n>5&&(r+=3+n-5)}for(var g=0;g<t-1;g++)for(var s=0;s<t-1;s++){var f=0;e.isDark(g,s)&&f++,e.isDark(g+1,s)&&f++,e.isDark(g,s+1)&&f++,e.isDark(g+1,s+1)&&f++,0!=f&&4!=f||(r+=3)}for(var c=0;c<t;c++)for(var h=0;h<t-6;h++)e.isDark(c,h)&&!e.isDark(c,h+1)&&e.isDark(c,h+2)&&e.isDark(c,h+3)&&e.isDark(c,h+4)&&!e.isDark(c,h+5)&&e.isDark(c,h+6)&&(r+=40);for(var d=0;d<t;d++)for(var v=0;v<t-6;v++)e.isDark(v,d)&&!e.isDark(v+1,d)&&e.isDark(v+2,d)&&e.isDark(v+3,d)&&e.isDark(v+4,d)&&!e.isDark(v+5,d)&&e.isDark(v+6,d)&&(r+=40);for(var m=0,b=0;b<t;b++)for(var P=0;P<t;P++)e.isDark(P,b)&&m++;return r+=10*(Math.abs(100*m/t/t-50)/5)}};function E(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function V(e,t){for(var r=1,o=function(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=e?3:0)}(e),a=0,n=f.length;a<=n;a++){var i=0;switch(t){case s.L:i=f[a][0];break;case s.M:i=f[a][1];break;case s.Q:i=f[a][2];break;case s.H:i=f[a][3]}if(o<=i)break;r++}if(r>f.length)throw new Error("Too long data");return r}function _(e,t,r){return{imageReady:function(e){var t={},r=Object.entries(e).map((function(e){return new Promise((function(r){var o=new Image;o.src=e[1],o.onload=function(){t[e[0]]=o,r()}}))}));return r.length?Promise.all(r).then((function(){return t})):Promise.resolve({})},getValue:function(e,r){var o;return null==t||null===(o=t[e])||void 0===o?void 0:o[r]},isPositionPoint:function(e,r){if(!t)return!1;var o=t.length,a=0;return e>=2&&e<5&&r>=2&&r<5?a=1:e<7&&r<7?a=2:e>=o-5&&e<o-2&&r>=2&r<5?a=1:e>=o-7&&e<o&&r>=0&r<7?a=2:e>=2&&e<5&&r>=o-5&r<o-2?a=1:e>=0&&e<7&&r>=o-7&r<o&&(a=2),a},getRangeTrue:function(e,r,o,a){var n=!0;if(t){t.length;for(var i=e;i<e+o;i++)for(var l=r;l<r+a;l++)1!=this.getValue(i,l)&&(n=!1);return n}return!1},getRangeFalse:function(e,r,o,a){var n=!0;if(t){t.length;for(var i=e;i<e+o;i++)for(var l=r;l<r+a;l++)this.getValue(i,l)&&(n=!1);return n}return!1},setRangeDisabled:function(e,r,o,a){if(!t)return!1;for(var n=t.length,i=e;i<e+o;i++)for(var l=r;l<r+a;l++)i<0||l<0||i>=n||l>=n||(t[i][l]=2)},getForegroundImageBrush:function(t){var r;if(t.width>e.canvas.width||t.height>e.canvas.height){var o=document.createElement("canvas"),a=o.getContext("2d");t.width>e.canvas.width?(o.width=e.canvas.width,o.height=t.height/t.width*e.canvas.width):(o.width=t.width/t.height*e.canvas.height,o.height=e.canvas.height),a.drawImage(t,0,0,o.width,o.height),r=e.createPattern(o,"repeat")}else r=e.createPattern(t,"repeat");return r},drawRightAngle:function(t,r,o,a){var n,i;switch(o){case 0:n=t*a,i=r*a,e.lineTo(n,i);break;case 1:n=t*a+a,i=r*a,e.lineTo(n,i);break;case 2:n=t*a+a,i=r*a+a,e.lineTo(n,i);break;case 3:n=t*a,i=r*a+a,e.lineTo(n,i)}},drawRoundBrick:function(t,r,o,a){var n,i,l=a/2;switch(o){case 0:n=t*a+l,i=r*a+l,e.arc(n,i,l,Math.PI,1.5*Math.PI,!1);break;case 1:n=t*a+a-l,i=r*a+l,e.arc(n,i,l,1.5*Math.PI,2*Math.PI,!1);break;case 2:n=t*a+a-l,i=r*a+a-l,e.arc(n,i,l,0,Math.PI/2,!1);break;case 3:n=t*a+l,i=r*a+a-l,e.arc(n,i,l,Math.PI/2,Math.PI,!1)}},fillRound:function(t,r,o,a){var n,i,l=a/2;switch(e.beginPath(),o){case 0:n=t*a+l,i=r*a+l,e.arc(n,i,l,Math.PI,1.5*Math.PI,!1),n=t*a,i=r*a;break;case 1:n=t*a+a-l,i=r*a+l,e.arc(n,i,l,1.5*Math.PI,2*Math.PI,!1),n=t*a+a,i=r*a;break;case 2:n=t*a+a-l,i=r*a+a-l,e.arc(n,i,l,0,Math.PI/2,!1),n=t*a+a,i=r*a+a;break;case 3:n=t*a+l,i=r*a+a-l,e.arc(n,i,l,Math.PI/2,Math.PI,!1),n=t*a,i=r*a+a}e.lineTo(n,i),e.closePath(),e.fill(),e.stroke()}}}E.prototype={addData:function(e){var t=new m(e);this.dataList.push(t),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++){this.modules[r]=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++)this.modules[r][o]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=E.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var r=-1;r<=7;r++)if(!(e+r<=-1||this.moduleCount<=e+r))for(var o=-1;o<=7;o++)t+o<=-1||this.moduleCount<=t+o||(this.modules[e+r][t+o]=0<=r&&r<=6&&(0==o||6==o)||0<=o&&o<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=o&&o<=4)},getBestMaskPattern:function(){for(var e=0,t=0,r=0;r<8;r++){this.makeImpl(!0,r);var o=D.getLostPoint(this);(0==r||e>o)&&(e=o,t=r)}return t},createMovieClip:function(e,t,r){var o=e.createEmptyMovieClip(t,r);this.make();for(var a=0;a<this.modules.length;a++)for(var n=1*a,i=0;i<this.modules[a].length;i++){var l=1*i;this.modules[a][i]&&(o.beginFill(0,100),o.moveTo(l,n),o.lineTo(l+1,n),o.lineTo(l+1,n+1),o.lineTo(l,n+1),o.endFill())}return o},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=D.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var r=0;r<e.length;r++){var o=e[t],a=e[r];if(null==this.modules[o][a])for(var n=-2;n<=2;n++)for(var i=-2;i<=2;i++)this.modules[o+n][a+i]=-2==n||2==n||-2==i||2==i||0==n&&0==i}},setupTypeNumber:function(e){for(var t=D.getBCHTypeNumber(this.typeNumber),r=0;r<18;r++){var o=!e&&1==(t>>r&1);this.modules[Math.floor(r/3)][r%3+this.moduleCount-8-3]=o}for(var a=0;a<18;a++){var n=!e&&1==(t>>a&1);this.modules[a%3+this.moduleCount-8-3][Math.floor(a/3)]=n}},setupTypeInfo:function(e,t){for(var r=this.errorCorrectLevel<<3|t,o=D.getBCHTypeInfo(r),a=0;a<15;a++){var n=!e&&1==(o>>a&1);a<6?this.modules[a][8]=n:a<8?this.modules[a+1][8]=n:this.modules[this.moduleCount-15+a][8]=n}for(var i=0;i<15;i++){var l=!e&&1==(o>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=l:i<9?this.modules[8][15-i-1+1]=l:this.modules[8][15-i-1]=l}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var r=-1,o=this.moduleCount-1,a=7,n=0,i=this.moduleCount-1;i>0;i-=2)for(6==i&&i--;;){for(var l=0;l<2;l++)if(null==this.modules[o][i-l]){var u=!1;n<e.length&&(u=1==(e[n]>>>a&1)),D.getMask(t,o,i-l)&&(u=!u),this.modules[o][i-l]=u,-1==--a&&(n++,a=7)}if((o+=r)<0||this.moduleCount<=o){o-=r,r=-r;break}}}},E.PAD0=236,E.PAD1=17,E.createData=function(e,t,r){for(var o=w.getRSBlocks(e,t),a=new b,n=0;n<r.length;n++){var i=r[n];a.put(i.mode,4),a.put(i.getLength(),D.getLengthInBits(i.mode,e)),i.write(a)}for(var l=0,u=0;u<o.length;u++)l+=o[u].dataCount;if(a.getLengthInBits()>8*l)throw new Error("code length overflow. ("+a.getLengthInBits()+">"+8*l+")");for(a.getLengthInBits()+4<=8*l&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(!1);for(;!(a.getLengthInBits()>=8*l||(a.put(E.PAD0,8),a.getLengthInBits()>=8*l));)a.put(E.PAD1,8);return E.createBytes(a,o)},E.createBytes=function(e,t){for(var r=0,o=0,a=0,n=new Array(t.length),i=new Array(t.length),l=0;l<t.length;l++){var u=t[l].dataCount,g=t[l].totalCount-u;o=Math.max(o,u),a=Math.max(a,g),n[l]=new Array(u);for(var s=0;s<n[l].length;s++)n[l][s]=255&e.buffer[s+r];r+=u;var f=D.getErrorCorrectPolynomial(g),c=new k(n[l],f.getLength()-1).mod(f);i[l]=new Array(f.getLength()-1);for(var h=0;h<i[l].length;h++){var d=h+c.getLength()-i[l].length;i[l][h]=d>=0?c.get(d):0}}for(var v=0,m=0;m<t.length;m++)v+=t[m].totalCount;for(var b=new Array(v),P=0,I=0;I<o;I++)for(var y=0;y<t.length;y++)I<n[y].length&&(b[P++]=n[y][I]);for(var p=0;p<a;p++)for(var w=0;w<t.length;w++)p<i[w].length&&(b[P++]=i[w][p]);return b};var O={default:function(e,t,r){var o=t.length,a=.05*e.canvas.width,n=(e.canvas.width-2*a)/o,i=a,l=a,u=_(e,t),g={};r.foregroundImage&&(g.foregroundImage=r.foregroundImage),r.backgroundImage&&(g.backgroundImage=r.backgroundImage),u.imageReady(g).then((function(t){var a=r.backgroundColor||"#ffffff",g=(r.foregroundColor||"#000000").split(","),s=g[0];if(!r.foregroundColor&&t.foregroundImage&&(s=u.getForegroundImageBrush(t.foregroundImage)),g.length>1){var f=e.createLinearGradient(0,0,e.canvas.width,e.canvas.height),c=g.length-1;g.forEach((function(e,t){f.addColorStop(t/c,e)})),s=f}var h=r.innerColor||s,d=r.outerColor||s;e.save(),!r.backgroundColor&&t.backgroundImage?e.drawImage(t.backgroundImage,0,0,e.canvas.width,e.canvas.height):(e.fillStyle=a,e.fillRect(0,0,e.canvas.width,e.canvas.height)),e.restore(),e.save(),e.translate(i,l);for(var v=0;v<o;v++)for(var m=0;m<o;m++)u.getValue(v,m)&&(1==u.isPositionPoint(v,m)?e.fillStyle=h:2==u.isPositionPoint(v,m)?e.fillStyle=d:e.fillStyle=s,e.fillRect(Math.ceil(v*n)-.5,Math.ceil(m*n)-.5,Math.ceil(n)+1,Math.ceil(n)+1));e.restore()}))},water:function(e,t,r){var o=t.length,a=.05*e.canvas.width,n=(e.canvas.width-2*a)/o,i=a,l=a,u=_(e,t),g={};r.foregroundImage&&(g.foregroundImage=r.foregroundImage),r.backgroundImage&&(g.backgroundImage=r.backgroundImage),u.imageReady(g).then((function(t){var a=r.backgroundColor||"#ffffff",g=(r.foregroundColor||"#000000").split(","),s=g[0];if(!r.foregroundColor&&t.foregroundImage&&(s=u.getForegroundImageBrush(t.foregroundImage)),g.length>1){var f=e.createLinearGradient(0,0,e.canvas.width,e.canvas.height),c=g.length-1;g.forEach((function(e,t){f.addColorStop(t/c,e)})),s=f}var h=r.innerColor||s,d=r.outerColor||s;e.save(),!r.backgroundColor&&t.backgroundImage?e.drawImage(t.backgroundImage,0,0,e.canvas.width,e.canvas.height):(e.fillStyle=a,e.fillRect(0,0,e.canvas.width,e.canvas.height)),e.restore(),e.save(),e.translate(i,l);for(var v=0;v<o;v++)for(var m=0;m<o;m++)if(1==u.isPositionPoint(v,m)?(e.fillStyle=h,e.strokeStyle=h):2==u.isPositionPoint(v,m)?(e.fillStyle=d,e.strokeStyle=d):(e.fillStyle=s,e.strokeStyle=s),u.getValue(v,m)){var b=v*n,P=m*n+n/2;e.beginPath(),e.moveTo(b,P),u.getValue(v-1,m)||u.getValue(v,m-1)||u.getValue(v-1,m-1)?u.drawRightAngle(v,m,0,n):u.drawRoundBrick(v,m,0,n),u.getValue(v,m-1)||u.getValue(v+1,m)||u.getValue(v+1,m-1)?u.drawRightAngle(v,m,1,n):u.drawRoundBrick(v,m,1,n),u.getValue(v,m+1)||u.getValue(v+1,m)||u.getValue(v+1,m+1)?u.drawRightAngle(v,m,2,n):u.drawRoundBrick(v,m,2,n),u.getValue(v,m+1)||u.getValue(v-1,m)||u.getValue(v-1,m+1)?u.drawRightAngle(v,m,3,n):u.drawRoundBrick(v,m,3,n),e.closePath(),e.fill(),e.stroke()}else u.isPositionPoint(v,m,o)||(u.getValue(v,m-1)&&u.getValue(v-1,m)&&u.fillRound(v,m,0,n),u.getValue(v,m+1)&&u.getValue(v-1,m)&&u.fillRound(v,m,3,n),u.getValue(v,m+1)&&u.getValue(v+1,m)&&u.fillRound(v,m,2,n),u.getValue(v,m-1)&&u.getValue(v+1,m)&&u.fillRound(v,m,1,n));e.restore()}))},star:function(e,t,r){var o=t.length,a=.05*e.canvas.width,n=(e.canvas.width-2*a)/o,i=a,l=a,u=_(e,t),g=function(t,r,o){var a=.6*o,n=.55*o;e.beginPath();for(var i=0;i<5;i++)e.lineTo(t+Math.cos((18+72*i)/180*Math.PI)*a+n,r-Math.sin((18+72*i)/180*Math.PI)*a+n),e.lineTo(t+.4*Math.cos((54+72*i)/180*Math.PI)*a+n,r-.4*Math.sin((54+72*i)/180*Math.PI)*a+n);e.closePath(),e.fill()},s={};r.foregroundImage&&(s.foregroundImage=r.foregroundImage),r.backgroundImage&&(s.backgroundImage=r.backgroundImage),u.imageReady(s).then((function(t){var a=r.backgroundColor||"#ffffff",s=(r.foregroundColor||"#000000").split(","),f=s[0];!r.foregroundColor&&t.foregroundImage&&(f=u.getForegroundImageBrush(t.foregroundImage));var c=r.innerColor||(null==s?void 0:s[1])||f;r.outerColor,e.save(),!r.backgroundColor&&t.backgroundImage?e.drawImage(t.backgroundImage,0,0,e.canvas.width,e.canvas.height):(e.fillStyle=a,e.fillRect(0,0,e.canvas.width,e.canvas.height)),e.restore(),e.save(),e.translate(i,l);for(var h=0;h<o;h++)for(var d=0;d<o;d++)if(1==u.getValue(h,d)){if(1==u.isPositionPoint(h,d))e.fillStyle=c;else if(2==u.isPositionPoint(h,d)){var v=s[(h+d)%s.length],m=r.outerColor||v;e.fillStyle=m}else{var b=s[(h+d)%s.length];!r.foregroundColor&&t.foregroundImage&&(b=e.createPattern(t.foregroundImage,"repeat")),e.fillStyle=b}u.getRangeTrue(h,d,3,3)?(g(h*n-.55*n,d*n-.45*n,3.8*n),u.setRangeDisabled(h,d,3,3)):u.getRangeTrue(h,d,2,2)?(g(h*n-.15*n,d*n-.12*n,2*n),u.setRangeDisabled(h,d,2,2)):g(h*n,d*n,n)}e.restore()}))},rect:function(e,t,r){var o=t.length,a=.05*e.canvas.width,n=(e.canvas.width-2*a)/o,i=a,l=a,u=_(e,t),g={};r.foregroundImage&&(g.foregroundImage=r.foregroundImage),r.backgroundImage&&(g.backgroundImage=r.backgroundImage),u.imageReady(g).then((function(t){var a=r.backgroundColor||"#ffffff",g=(r.foregroundColor||"#000000").split(","),s=g[0];!r.foregroundColor&&t.foregroundImage&&(s=u.getForegroundImageBrush(t.foregroundImage));var f=r.innerColor||(null==g?void 0:g[1])||s,c=r.outerColor||s;e.save(),!r.backgroundColor&&t.backgroundImage?e.drawImage(t.backgroundImage,0,0,e.canvas.width,e.canvas.height):(e.fillStyle=a,e.fillRect(0,0,e.canvas.width,e.canvas.height)),e.restore(),e.save(),e.translate(i,l);for(var h=0;h<o;h++)for(var d=0;d<o;d++)if(1==u.getValue(h,d)){if(1==u.isPositionPoint(h,d))e.fillStyle=f;else if(2==u.isPositionPoint(h,d))e.fillStyle=c;else{var v=g[(h+d)%g.length];!r.foregroundColor&&t.foregroundImage&&(v=e.createPattern(t.foregroundImage,"repeat")),e.fillStyle=v}u.isPositionPoint(h,d)?(e.fillRect(h*n,d*n,7*n,7*n),e.fillStyle=a,e.fillRect(h*n+n,d*n+n,5*n,5*n),e.fillStyle=f,e.beginPath(),e.moveTo(h*n+3.5*n,d*n+n),e.lineTo(h*n+6*n,d*n+3.5*n),e.lineTo(h*n+3.5*n,d*n+6*n),e.lineTo(h*n+n,d*n+3.5*n),e.closePath(),e.fill(),u.setRangeDisabled(h,d,7,7)):(h+d)%2?(e.beginPath(),e.moveTo(h*n+.5*n,d*n),e.lineTo(h*n+n,d*n+.5*n),e.lineTo(h*n+.5*n,d*n+n),e.lineTo(h*n,d*n+.5*n),e.closePath(),e.fill()):e.fillRect(h*n,d*n,n,n)}e.restore()}))},diamond:function(e,t,r){var o=t.length,a=.05*e.canvas.width,n=(e.canvas.width-2*a)/o,i=a,l=a,u=_(e,t),g={};r.foregroundImage&&(g.foregroundImage=r.foregroundImage),r.backgroundImage&&(g.backgroundImage=r.backgroundImage),u.imageReady(g).then((function(t){var a=r.backgroundColor||"#ffffff",g=(r.foregroundColor||"#000000").split(","),s=g[0];if(!r.foregroundColor&&t.foregroundImage&&(s=u.getForegroundImageBrush(t.foregroundImage)),g.length>1){var f=e.createLinearGradient(0,0,e.canvas.width,e.canvas.height),c=g.length-1;g.forEach((function(e,t){f.addColorStop(t/c,e)})),s=f}var h=r.innerColor||s,d=r.outerColor||s;e.save(),!r.backgroundColor&&t.backgroundImage?e.drawImage(t.backgroundImage,0,0,e.canvas.width,e.canvas.height):(e.fillStyle=a,e.fillRect(0,0,e.canvas.width,e.canvas.height)),e.restore(),e.save(),e.translate(i+n/2,l+n/2);for(var v=0;v<o;v++)for(var m=0;m<o;m++)1==u.isPositionPoint(v,m)?(e.fillStyle=h,e.strokeStyle=h):2==u.isPositionPoint(v,m)?(e.fillStyle=d,e.strokeStyle=d):(e.fillStyle=s,e.strokeStyle=s),u.getValue(v,m)?(e.beginPath(),e.moveTo(v*n-.5*n,m*n),(u.getValue(v-1,m)||u.getValue(v,m-1))&&e.lineTo(v*n-.5*n,m*n-.5*n),e.lineTo(v*n,m*n-.5*n),(u.getValue(v+1,m)||u.getValue(v,m-1))&&e.lineTo(v*n+.5*n,m*n-.5*n),e.lineTo(v*n+.5*n,m*n),(u.getValue(v+1,m)||u.getValue(v,m+1))&&e.lineTo(v*n+.5*n,m*n+.5*n),e.lineTo(v*n,m*n+.5*n),(u.getValue(v-1,m)||u.getValue(v,m+1))&&e.lineTo(v*n-.5*n,m*n+.5*n),e.closePath(),e.fill(),e.stroke()):(u.getValue(v-1,m)&&u.getValue(v,m-1)&&u.getValue(v-1,m-1)&&(e.beginPath(),e.moveTo(v*n-.5*n,m*n-.5*n),e.lineTo(v*n-.5*n,m*n),e.lineTo(v*n,m*n-.5*n),e.closePath(),e.fill(),e.stroke()),u.getValue(v+1,m)&&u.getValue(v,m-1)&&u.getValue(v+1,m-1)&&(e.beginPath(),e.moveTo(v*n+.5*n,m*n-.5*n),e.lineTo(v*n+.5*n,m*n),e.lineTo(v*n,m*n-.5*n),e.closePath(),e.fill(),e.stroke()),u.getValue(v-1,m)&&u.getValue(v,m+1)&&u.getValue(v-1,m+1)&&(e.beginPath(),e.moveTo(v*n-.5*n,m*n+.5*n),e.lineTo(v*n-.5*n,m*n),e.lineTo(v*n,m*n+.5*n),e.closePath(),e.fill(),e.stroke()),u.getValue(v+1,m)&&u.getValue(v,m+1)&&u.getValue(v+1,m+1)&&(e.beginPath(),e.moveTo(v*n+.5*n,m*n+.5*n),e.lineTo(v*n+.5*n,m*n),e.lineTo(v*n,m*n+.5*n),e.closePath(),e.fill(),e.stroke()));e.restore()}))},hexagon:function(e,t,r){var o=t.length,a=.05*e.canvas.width,n=(e.canvas.width-2*a)/o,i=a,l=a,u=_(e,t),g={};r.foregroundImage&&(g.foregroundImage=r.foregroundImage),r.backgroundImage&&(g.backgroundImage=r.backgroundImage),u.imageReady(g).then((function(t){var a=r.backgroundColor||"#ffffff",g=(r.foregroundColor||"#000000").split(","),s=g[0];!r.foregroundColor&&t.foregroundImage&&(s=u.getForegroundImageBrush(t.foregroundImage));var f=r.innerColor||(null==g?void 0:g[1])||s,c=r.outerColor||s;e.save(),!r.backgroundColor&&t.backgroundImage?e.drawImage(t.backgroundImage,0,0,e.canvas.width,e.canvas.height):(e.fillStyle=a,e.fillRect(0,0,e.canvas.width,e.canvas.height)),e.restore(),e.save(),e.translate(i+n/2,l+n/2);for(var h=1.5,d=0;d<o;d++)for(var v=0;v<o;v++)if(1==u.getValue(d,v)){var m=g[(d+v)%g.length];!r.foregroundColor&&t.foregroundImage&&(m=e.createPattern(t.foregroundImage,"repeat")),1==u.isPositionPoint(d,v)?(e.fillStyle=f,e.strokeStyle=f):2==u.isPositionPoint(d,v)?(e.fillStyle=c,e.strokeStyle=c):(e.fillStyle=m,e.strokeStyle=m),u.isPositionPoint(d,v)?(e.beginPath(),e.moveTo(d*n-.5*n,v*n+1*n),e.lineTo(d*n+3*n,v*n-.5*n),e.lineTo(d*n+6.5*n,v*n+1*n),e.lineTo(d*n+6.5*n,v*n+5*n),e.lineTo(d*n+3*n,v*n+6.5*n),e.lineTo(d*n-.5*n,v*n+5*n),e.closePath(),e.fill(),e.stroke(),e.fillStyle=a,e.strokeStyle=a,e.beginPath(),e.moveTo(d*n+.5*n,v*n+1.5*n+1/14*n),e.lineTo(d*n+3*n,v*n+.5*n),e.lineTo(d*n+5.5*n,v*n+1.5*n+1/14*n),e.lineTo(d*n+5.5*n,v*n+4.5*n-1/14*n),e.lineTo(d*n+3*n,v*n+5.5*n),e.lineTo(d*n+.5*n,v*n+4.5*n-1/14*n),e.closePath(),e.fill(),e.stroke(),e.fillStyle=f,e.strokeStyle=f,e.beginPath(),e.moveTo(d*n+1.5*n,v*n+2.5*n-5/14*n),e.lineTo(d*n+3*n,v*n+1.5*n),e.lineTo(d*n+4.5*n,v*n+2.5*n-5/14*n),e.lineTo(d*n+4.5*n,v*n+3.5*n+5/14*n),e.lineTo(d*n+3*n,v*n+4.5*n),e.lineTo(d*n+1.5*n,v*n+3.5*n+5/14*n),e.closePath(),e.fill(),e.stroke(),u.setRangeDisabled(d,v,7,7),e.fillRect(d*n-.25*n,v*n-.25*n,.5*n,.5*n),e.fillRect(d*n+5.75*n,v*n-.25*n,.5*n,.5*n),e.fillRect(d*n-.25*n,v*n+5.75*n,.5*n,.5*n),e.fillRect(d*n+5.75*n,v*n+5.75*n,.5*n,.5*n)):(e.beginPath(),d%2?(e.moveTo(d*n-n/h,v*n-.25*n),e.lineTo(d*n-n/h/2,v*n-.75*n),e.lineTo(d*n+n/h/2,v*n-.75*n),e.lineTo(d*n+n/h,v*n-.25*n),e.lineTo(d*n+n/h/2,v*n+.25*n),e.lineTo(d*n-n/h/2,v*n+.25*n)):(e.moveTo(d*n-n/h,v*n+.25*n),e.lineTo(d*n-n/h/2,v*n-.25*n),e.lineTo(d*n+n/h/2,v*n-.25*n),e.lineTo(d*n+n/h,v*n+.25*n),e.lineTo(d*n+n/h/2,v*n+.75*n),e.lineTo(d*n-n/h/2,v*n+.75*n)),e.closePath(),e.fill(),e.stroke())}e.restore()}))},bar:function(e,t,r){var o=t.length,a=.05*e.canvas.width,n=(e.canvas.width-2*a)/o,i=a,l=a,u=_(e,t),g={};r.foregroundImage&&(g.foregroundImage=r.foregroundImage),r.backgroundImage&&(g.backgroundImage=r.backgroundImage),u.imageReady(g).then((function(t){var a=r.backgroundColor||"#ffffff",g=(r.foregroundColor||"#000000").split(","),s=g[0];!r.foregroundColor&&t.foregroundImage&&(s=u.getForegroundImageBrush(t.foregroundImage));var f=r.innerColor||(null==g?void 0:g[1])||s,c=r.outerColor||s;e.save(),!r.backgroundColor&&t.backgroundImage?e.drawImage(t.backgroundImage,0,0,e.canvas.width,e.canvas.height):(e.fillStyle=a,e.fillRect(0,0,e.canvas.width,e.canvas.height)),e.restore(),e.save(),e.translate(i+.5*n,l+.5*n);for(var h=0;h<o;h++)for(var d=0;d<o;d++)if(1==u.getValue(h,d)){if(1==u.isPositionPoint(h,d))e.fillStyle=f;else if(2==u.isPositionPoint(h,d))e.fillStyle=c;else{var v=g[(h+d)%g.length];!r.foregroundColor&&t.foregroundImage&&(v=e.createPattern(t.foregroundImage,"repeat")),e.fillStyle=v}u.isPositionPoint(h,d)?(e.beginPath(),e.arc((h+3)*n,(d+3)*n,3.5*n,0,2*Math.PI),e.closePath(),e.fill(),e.fillStyle=a,e.beginPath(),e.arc((h+3)*n,(d+3)*n,2.5*n,0,2*Math.PI),e.closePath(),e.fill(),e.fillStyle=f,e.beginPath(),e.arc((h+3)*n,(d+3)*n,1.5*n,0,2*Math.PI),e.closePath(),e.fill(),u.setRangeDisabled(h,d,7,7)):u.getRangeTrue(h,d,3,1)?(e.beginPath(),e.arc(h*n,d*n,.4*n,.5*Math.PI,1.5*Math.PI),e.arc((h+2)*n,d*n,.4*n,-.5*Math.PI,.5*Math.PI),e.closePath(),e.fill(),u.setRangeDisabled(h,d,3,1)):u.getRangeTrue(h,d,2,1)?(e.beginPath(),e.arc(h*n,d*n,.4*n,.5*Math.PI,1.5*Math.PI),e.arc((h+1)*n,d*n,.4*n,-.5*Math.PI,.5*Math.PI),e.closePath(),e.fill(),u.setRangeDisabled(h,d,2,1)):u.getRangeTrue(h,d,1,3)?(e.beginPath(),e.arc(h*n,d*n,.4*n,Math.PI,2*Math.PI),e.arc(h*n,(d+2)*n,.4*n,0,Math.PI),e.closePath(),e.fill(),u.setRangeDisabled(h,d,1,3)):u.getRangeTrue(h,d,1,2)?(e.beginPath(),e.arc(h*n,d*n,.4*n,Math.PI,2*Math.PI),e.arc(h*n,(d+1)*n,.4*n,0,Math.PI),e.closePath(),e.fill(),u.setRangeDisabled(h,d,1,2)):(e.beginPath(),e.arc(h*n,d*n,.4*n,0,2*Math.PI),e.closePath(),e.fill())}e.restore()}))},heart:function(e,t,r){var o=t.length,a=.05*e.canvas.width,n=(e.canvas.width-2*a)/o,i=a,l=a,u=_(e,t),g={};r.foregroundImage&&(g.foregroundImage=r.foregroundImage),r.backgroundImage&&(g.backgroundImage=r.backgroundImage),u.imageReady(g).then((function(t){var a=r.backgroundColor||"#ffffff",g=(r.foregroundColor||"#000000").split(","),s=g[0];!r.foregroundColor&&t.foregroundImage&&(s=u.getForegroundImageBrush(t.foregroundImage));var f=r.innerColor||(null==g?void 0:g[1])||s,c=r.outerColor||s;e.save(),!r.backgroundColor&&t.backgroundImage?e.drawImage(t.backgroundImage,0,0,e.canvas.width,e.canvas.height):(e.fillStyle=a,e.fillRect(0,0,e.canvas.width,e.canvas.height)),e.restore();for(var h=n,d=0;d<o;d++)for(var v=0;v<o;v++)if(1==u.getValue(d,v)){if(e.save(),1==u.isPositionPoint(d,v))e.fillStyle=f;else if(2==u.isPositionPoint(d,v))e.fillStyle=c;else{var m=g[(d+v)%g.length];!r.foregroundColor&&t.foregroundImage&&(m=e.createPattern(t.foregroundImage,"repeat")),e.fillStyle=m}u.getRangeTrue(d,v,3,3)?(h=.8*n,e.translate(i+(d+1.5)*n,l+(v+1.1)*n),e.beginPath(),e.arc(-h,0,h,Math.PI,0,!1),e.arc(h,0,h,Math.PI,0,!1),e.bezierCurveTo(1.9*h,1.2*h,.6*h,1.6*h,0,3*h),e.bezierCurveTo(-.6*h,1.6*h,-1.9*h,1.2*h,-2*h,0),e.closePath(),e.fill(),u.setRangeDisabled(d,v,3,3)):u.getRangeTrue(d,v,2,2)?(h=.5*n,e.translate(i+(d+1)*n,l+(v+.9)*n),e.beginPath(),e.arc(-h,0,h,Math.PI,0,!1),e.arc(h,0,h,Math.PI,0,!1),e.bezierCurveTo(1.9*h,1.2*h,.6*h,1.6*h,0,3*h),e.bezierCurveTo(-.6*h,1.6*h,-1.9*h,1.2*h,-2*h,0),e.closePath(),e.fill(),u.setRangeDisabled(d,v,2,2)):(h=.25*n,e.translate(i+(d+.5)*n,l+(v+.5)*n),e.beginPath(),e.arc(-h,0,h,Math.PI,0,!1),e.arc(h,0,h,Math.PI,0,!1),e.bezierCurveTo(1.9*h,1.2*h,.6*h,1.6*h,0,3*h),e.bezierCurveTo(-.6*h,1.6*h,-1.9*h,1.2*h,-2*h,0),e.closePath(),e.fill()),e.restore()}}))},glitter:function(e,t,r){var o=t.length,a=.05*e.canvas.width,n=(e.canvas.width-2*a)/o,i=a,l=a,u=_(e,t),g={};r.foregroundImage&&(g.foregroundImage=r.foregroundImage),r.backgroundImage&&(g.backgroundImage=r.backgroundImage),u.imageReady(g).then((function(t){var a=r.backgroundColor||"#ffffff",g=r.foregroundColor||"#000000",s=g.split(","),f=s[0];!r.foregroundColor&&t.foregroundImage&&(f=u.getForegroundImageBrush(t.foregroundImage));var c=r.innerColor||(null==s?void 0:s[1])||f,h=r.outerColor||f;e.save(),!r.backgroundColor&&t.backgroundImage?e.drawImage(t.backgroundImage,0,0,e.canvas.width,e.canvas.height):(e.fillStyle=a,e.fillRect(0,0,e.canvas.width,e.canvas.height)),e.restore(),e.save(),e.translate(i,l),e.fillStyle=g;for(var d=0;d<o;d++)for(var v=0;v<o;v++){if(1==u.isPositionPoint(d,v))e.fillStyle=c;else if(2==u.isPositionPoint(d,v))e.fillStyle=h;else{var m=s[(d+v)%s.length];!r.foregroundColor&&t.foregroundImage&&(m=e.createPattern(t.foregroundImage,"repeat")),e.fillStyle=m}1==u.getValue(d,v)&&(u.isPositionPoint(d,v)?(e.beginPath(),e.arc((d+3.5)*n,(v+3.5)*n,3.75*n,0,2*Math.PI),e.closePath(),e.fill(),e.fillStyle=a,e.beginPath(),e.arc((d+3.5)*n,(v+3.5)*n,2.8*n,0,2*Math.PI),e.closePath(),e.fill(),e.fillStyle=c,e.beginPath(),e.arc((d+1)*n,(v+1)*n,2.5*n,0,.5*Math.PI),e.arc((d+6)*n,(v+1)*n,2.5*n,.5*Math.PI,Math.PI),e.arc((d+6)*n,(v+5)*n+n,2.5*n,Math.PI,1.5*Math.PI),e.arc((d+1)*n,(v+5)*n+n,2.5*n,1.5*Math.PI,2*Math.PI),e.closePath(),e.fill(),u.setRangeDisabled(d,v,7,7)):(d+v)%2?(e.beginPath(),e.arc(d*n,v*n,.5*n,0,.5*Math.PI),e.arc(d*n+n,v*n,.5*n,.5*Math.PI,Math.PI),e.arc(d*n+n,v*n+n,.5*n,Math.PI,1.5*Math.PI),e.arc(d*n,v*n+n,.5*n,1.5*Math.PI,2*Math.PI),e.closePath(),e.fill()):(e.beginPath(),e.arc((d+.5)*n,(v+.5)*n,.5*n,0,2*Math.PI),e.closePath(),e.fill()))}e.restore()}))},fusion:function(e,t,r){var o=t.length,a=.05*e.canvas.width,n=(e.canvas.width-2*a)/o,i=a,l=a,u=_(e,t),g={};r.foregroundImage&&(g.foregroundImage=r.foregroundImage),r.backgroundImage&&(g.backgroundImage=r.backgroundImage),u.imageReady(g).then((function(t){var a=r.backgroundColor||"#ffffff",g=(r.foregroundColor||"#000000").split(",");g[0];if(!r.foregroundColor&&t.foregroundImage&&u.getForegroundImageBrush(t.foregroundImage),g.length>1){var s=e.createLinearGradient(0,0,e.canvas.width,e.canvas.height),f=g.length-1;g.forEach((function(e,t){s.addColorStop(t/f,e)})),s}r.innerColor,r.outerColor,e.save(),t.backgroundImage?e.drawImage(t.backgroundImage,0,0,e.canvas.width,e.canvas.height):(e.fillStyle=a,e.fillRect(0,0,e.canvas.width,e.canvas.height)),e.restore(),e.save(),e.translate(i,l);for(var c=0;c<o;c++)for(var h=0;h<o;h++)if(1==u.isPositionPoint(c,h)){var d=1==u.getValue(c,h)?r.innerColor||r.foregroundColor||"#000000":r.backgroundColor||"#ffffff";t.backgroundImage&&(d=d.replace(/#([0-9a-fA-F]{6}).*/,"#$188")),e.fillStyle=d,e.fillRect(c*n,h*n,n,n)}else if(2==u.isPositionPoint(c,h)){var v=1==u.getValue(c,h)?r.outerColor||r.foregroundColor||"#000000":r.backgroundColor||"#ffffff";t.backgroundImage&&(v=v.replace(/#([0-9a-fA-F]{6}).*/,"#$188")),e.fillStyle=v,e.fillRect(c*n,h*n,n,n)}else{var m=1==u.getValue(c,h)?r.foregroundColor||"#000000":r.backgroundColor||"#ffffff";t.backgroundImage&&(m=m.replace(/#([0-9a-fA-F]{6}).*/,"#$188")),e.fillStyle=m,e.beginPath(),e.arc(c*n,h*n,.5*n,0,.5*Math.PI),e.arc(c*n+n,h*n,.5*n,.5*Math.PI,Math.PI),e.arc(c*n+n,h*n+n,.5*n,Math.PI,1.5*Math.PI),e.arc(c*n,h*n+n,.5*n,1.5*Math.PI,2*Math.PI),e.closePath(),e.fill()}e.restore()}))}};const x=new CSSStyleSheet;function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,o=l(e);if(t){var a=l(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return i(this,r)}}x.replaceSync(':host {\n    display: inline-table;\n    vertical-align: middle;\n    container-type: inline-size;\n    font-family: Arial,Helvetica,"Microsoft Yahei";\n    font-size: 14px;\n    aspect-ratio: 1;\n}\n\n.mod-qrcode{\n    position: relative;\n    width: 100%;\n    height: 100%;\n}\n.mod-qrcode canvas{\n    width: 100%;\n    height: 100%;\n    background: #ffffff;\n    vertical-align: middle;\n}\n.mod-qrcode .logo{\n    position: absolute;\n    left: 0;\n    top: 0;\n    z-index: 9;\n    width: 100%;\n    height: 100%;\n}\n');var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)}(u,e);var r,o,i,l=H(u);function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),l.call(this)}return r=u,o=[{key:"value",get:function(){return this.getAttribute("value")||"https://passer-by.com/"}},{key:"template",get:function(){return this.getAttribute("template")||"default"}},{key:"level",get:function(){return this.getAttribute("level")||"H"}},{key:"width",get:function(){return+this.getAttribute("width")||0}},{key:"height",get:function(){return+this.getAttribute("height")||0}},{key:"logo",get:function(){return this.getAttribute("logo")||""}},{key:"foregroundImage",get:function(){return this.getAttribute("foreground-image")||""}},{key:"backgroundImage",get:function(){return this.getAttribute("background-image")||""}},{key:"foregroundColor",get:function(){return this.getAttribute("foreground-color")||""}},{key:"backgroundColor",get:function(){return this.getAttribute("background-color")||""}},{key:"innerColor",get:function(){return this.getAttribute("inner-color")||""}},{key:"outerColor",get:function(){return this.getAttribute("outer-color")||""}},{key:"attributeChangedCallback",value:function(e,t,r){t!=r&&this.context&&this.drawQRCode()}},{key:"connectedCallback",value:function(){var e=this;e.attachShadow({mode:"open"});var r=new CSSStyleSheet;if(r.insertRule(":host{\n            width: ".concat(this.width||300,"px;\n            height: ").concat(this.height||300,"px;\n        }")),e.shadowRoot.adoptedStyleSheets)e.shadowRoot.adoptedStyleSheets=[r,x];else{var o=document.createElement("style");o.rel="stylesheet",o.textContent=[r.cssRules].concat(t(x.cssRules)).map((function(e){return e.cssText})).join(""),e.shadowRoot.appendChild(o)}e.render(),e.drawQRCode(),e.addEventListener("resize",(function(){e.resize()}),!1),document.addEventListener("visibilitychange",(function(){e.drawQRCode()}))}},{key:"render",value:function(e){var t=this;t.shadowRoot.innerHTML='<div class="mod-qrcode">\n            <canvas></canvas>\n            <div class="logo"></div>\n        </div>',t.$module=t.shadowRoot.querySelector(".mod-qrcode"),t.$canvas=t.$module.querySelector("canvas"),t.context=t.$canvas.getContext("2d"),t.resize(),"undefined"!=typeof ResizeObserver&&new ResizeObserver((function(){t.resize()})).observe(t)}},{key:"resize",value:function(){var e=this,t=window.getComputedStyle(e);if(t.width&&t.height){var r=Math.max(parseInt(t.width),parseInt(t.height));e.$canvas.width=2*r,e.$canvas.height=2*r,e.drawQRCode()}}},{key:"drawQRCode",value:function(){var e=this,t=e.level;e.logo?(t="H",e.$module.querySelector(".logo").style="background: url(".concat(e.logo,") center center/ 25% 25% no-repeat;")):e.$module.querySelector(".logo").style="";var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://passer-by.com/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"H",r=new E(V(e,s[t]),s[t]);return r.addData(e),r.make(),r.modules}(e.value,t);e.context.clearRect(0,0,e.$canvas.width,e.$canvas.height),(O[e.template]||O.default)(e.context,r,{foregroundImage:e.foregroundImage,backgroundImage:e.backgroundImage,foregroundColor:e.foregroundColor,backgroundColor:e.backgroundColor,innerColor:e.innerColor,outerColor:e.outerColor})}}],i=[{key:"observedAttributes",get:function(){return["value","template","level","width","height","logo","foreground-image","background-image","foreground-color","background-color","inner-color","outer-color"]}}],o&&a(r.prototype,o),i&&a(r,i),Object.defineProperty(r,"prototype",{writable:!1}),u}(g(HTMLElement));customElements.get("widget-qrcode")||customElements.define("widget-qrcode",j)}();
