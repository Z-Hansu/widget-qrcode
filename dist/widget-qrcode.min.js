/*!
 * widget-qrcode v1.0.4
 * qrcode component
 * https://passer-by.com/widget-qrcode/
 *
 * Copyright (c) 2024-present, HaoLe Zheng
 *
 * Released under the MIT License
 * https://github.com/mumuy/widget-qrcode
 *
 * Created on: 2024-09-12
 */
!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=Array(t);o<t;o++)r[o]=e[o];return r}function t(t,o){if(t){if("string"==typeof t)return e(t,o);var r={}.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,o):void 0}}function o(o){return function(t){if(Array.isArray(t))return e(t)}(o)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||t(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var o=e[Symbol.toPrimitive];if(void 0!==o){var n=o.call(e,t||"default");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function a(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,n(r.key),r)}}function i(e,t){if(t&&("object"==r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function g(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(g=function(){return!!e})()}function s(e){var t="function"==typeof Map?new Map:void 0;return s=function(e){if(null===e||!function(e){try{return-1!==Function.toString.call(e).indexOf("[native code]")}catch(t){return"function"==typeof e}}(e))return e;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return function(e,t,o){if(g())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var n=new(e.bind.apply(e,r));return o&&u(n,o.prototype),n}(e,arguments,l(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),u(o,e)},s(e)}var f={L:1,M:0,Q:3,H:2},h=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],c=1,d=2,v=4,P=8;function b(e){this.mode=v,this.data=e,this.parsedData=[];for(var t=0,o=this.data.length;t<o;t++){var r=[],n=this.data.charCodeAt(t);n>65536?(r[0]=240|(1835008&n)>>>18,r[1]=128|(258048&n)>>>12,r[2]=128|(4032&n)>>>6,r[3]=128|63&n):n>2048?(r[0]=224|(61440&n)>>>12,r[1]=128|(4032&n)>>>6,r[2]=128|63&n):n>128?(r[0]=192|(1984&n)>>>6,r[1]=128|63&n):r[0]=n,this.parsedData.push(r)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function m(){this.buffer=[],this.length=0}b.prototype={getLength:function(e){return this.parsedData.length},write:function(e){for(var t=0,o=this.parsedData.length;t<o;t++)e.put(this.parsedData[t],8)}},m.prototype={get:function(e){var t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(var o=0;o<t;o++)this.putBit(1==(e>>>t-o-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};for(var I={glog:function(e){if(e<1)throw new Error("glog("+e+")");return I.LOG_TABLE[e]},gexp:function(e){for(;e<0;)e+=255;for(;e>=256;)e-=255;return I.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},y=0;y<8;y++)I.EXP_TABLE[y]=1<<y;for(var p=8;p<256;p++)I.EXP_TABLE[p]=I.EXP_TABLE[p-4]^I.EXP_TABLE[p-5]^I.EXP_TABLE[p-6]^I.EXP_TABLE[p-8];for(var C=0;C<255;C++)I.LOG_TABLE[I.EXP_TABLE[C]]=C;function k(e,t){if(null==e.length)throw new Error(e.length+"/"+t);for(var o=0;o<e.length&&0==e[o];)o++;this.num=new Array(e.length-o+t);for(var r=0;r<e.length-o;r++)this.num[r]=e[r+o]}function w(e,t){this.totalCount=e,this.dataCount=t}k.prototype={get:function(e){return this.num[e]},getLength:function(){return this.num.length},multiply:function(e){for(var t=new Array(this.getLength()+e.getLength()-1),o=0;o<this.getLength();o++)for(var r=0;r<e.getLength();r++)t[o+r]^=I.gexp(I.glog(this.get(o))+I.glog(e.get(r)));return new k(t,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var t=I.glog(this.get(0))-I.glog(e.get(0)),o=new Array(this.getLength()),r=0;r<this.getLength();r++)o[r]=this.get(r);for(var n=0;n<e.getLength();n++)o[n]^=I.gexp(I.glog(e.get(n))+t);return new k(o,0).mod(e)}},w.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],w.getRSBlocks=function(e,t){var o=w.getRsBlockTable(e,t);if(null==o)throw new Error("bad rs block @ typeNumber:"+e+"/errorCorrectLevel:"+t);for(var r=o.length/3,n=[],a=0;a<r;a++)for(var i=o[3*a+0],l=o[3*a+1],u=o[3*a+2],g=0;g<i;g++)n.push(new w(l,u));return n},w.getRsBlockTable=function(e,t){switch(t){case f.L:return w.RS_BLOCK_TABLE[4*(e-1)+0];case f.M:return w.RS_BLOCK_TABLE[4*(e-1)+1];case f.Q:return w.RS_BLOCK_TABLE[4*(e-1)+2];case f.H:return w.RS_BLOCK_TABLE[4*(e-1)+3];default:return}};var T=0,M=1,R=2,S=3,V=4,A=5,B=6,D=7,L={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(e){for(var t=e<<10;L.getBCHDigit(t)-L.getBCHDigit(L.G15)>=0;)t^=L.G15<<L.getBCHDigit(t)-L.getBCHDigit(L.G15);return(e<<10|t)^L.G15_MASK},getBCHTypeNumber:function(e){for(var t=e<<12;L.getBCHDigit(t)-L.getBCHDigit(L.G18)>=0;)t^=L.G18<<L.getBCHDigit(t)-L.getBCHDigit(L.G18);return e<<12|t},getBCHDigit:function(e){for(var t=0;0!=e;)t++,e>>>=1;return t},getPatternPosition:function(e){return L.PATTERN_POSITION_TABLE[e-1]},getMask:function(e,t,o){switch(e){case T:return(t+o)%2==0;case M:return t%2==0;case R:return o%3==0;case S:return(t+o)%3==0;case V:return(Math.floor(t/2)+Math.floor(o/3))%2==0;case A:return t*o%2+t*o%3==0;case B:return(t*o%2+t*o%3)%2==0;case D:return(t*o%3+(t+o)%2)%2==0;default:throw new Error("bad maskPattern:"+e)}},getErrorCorrectPolynomial:function(e){for(var t=new k([1],0),o=0;o<e;o++)t=t.multiply(new k([1,I.gexp(o)],0));return t},getLengthInBits:function(e,t){if(1<=t&&t<10)switch(e){case c:return 10;case d:return 9;case v:case P:return 8;default:throw new Error("mode:"+e)}else if(t<27)switch(e){case c:return 12;case d:return 11;case v:return 16;case P:return 10;default:throw new Error("mode:"+e)}else{if(!(t<41))throw new Error("type:"+t);switch(e){case c:return 14;case d:return 13;case v:return 16;case P:return 12;default:throw new Error("mode:"+e)}}},getLostPoint:function(e){for(var t=e.getModuleCount(),o=0,r=0;r<t;r++)for(var n=0;n<t;n++){for(var a=0,i=e.isDark(r,n),l=-1;l<=1;l++)if(!(r+l<0||t<=r+l))for(var u=-1;u<=1;u++)n+u<0||t<=n+u||0==l&&0==u||i==e.isDark(r+l,n+u)&&a++;a>5&&(o+=3+a-5)}for(var g=0;g<t-1;g++)for(var s=0;s<t-1;s++){var f=0;e.isDark(g,s)&&f++,e.isDark(g+1,s)&&f++,e.isDark(g,s+1)&&f++,e.isDark(g+1,s+1)&&f++,0!=f&&4!=f||(o+=3)}for(var h=0;h<t;h++)for(var c=0;c<t-6;c++)e.isDark(h,c)&&!e.isDark(h,c+1)&&e.isDark(h,c+2)&&e.isDark(h,c+3)&&e.isDark(h,c+4)&&!e.isDark(h,c+5)&&e.isDark(h,c+6)&&(o+=40);for(var d=0;d<t;d++)for(var v=0;v<t-6;v++)e.isDark(v,d)&&!e.isDark(v+1,d)&&e.isDark(v+2,d)&&e.isDark(v+3,d)&&e.isDark(v+4,d)&&!e.isDark(v+5,d)&&e.isDark(v+6,d)&&(o+=40);for(var P=0,b=0;b<t;b++)for(var m=0;m<t;m++)e.isDark(m,b)&&P++;return o+=10*(Math.abs(100*P/t/t-50)/5)}};function E(e,t){this.typeNumber=e,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function _(e,t){for(var o=1,r=function(e){var t=encodeURI(e).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return t.length+(t.length!=e?3:0)}(e),n=0,a=h.length;n<=a;n++){var i=0;switch(t){case f.L:i=h[n][0];break;case f.M:i=h[n][1];break;case f.Q:i=h[n][2];break;case f.H:i=h[n][3]}if(r<=i)break;o++}if(o>h.length)throw new Error("Too long data");return o}function x(e,o){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var r,n,a,i,l=[],u=!0,g=!1;try{if(a=(o=o.call(e)).next,0===t){if(Object(o)!==o)return;u=!1}else for(;!(u=(r=a.call(o)).done)&&(l.push(r.value),l.length!==t);u=!0);}catch(e){g=!0,n=e}finally{try{if(!u&&null!=o.return&&(i=o.return(),Object(i)!==i))return}finally{if(g)throw n}}return l}}(e,o)||t(e,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}E.prototype={addData:function(e){var t=new b(e);this.dataList.push(t),this.dataCache=null},isDark:function(e,t){if(e<0||this.moduleCount<=e||t<0||this.moduleCount<=t)throw new Error(e+","+t);return this.modules[e][t]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(e,t){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var o=0;o<this.moduleCount;o++){this.modules[o]=new Array(this.moduleCount);for(var r=0;r<this.moduleCount;r++)this.modules[o][r]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(e,t),this.typeNumber>=7&&this.setupTypeNumber(e),null==this.dataCache&&(this.dataCache=E.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,t)},setupPositionProbePattern:function(e,t){for(var o=-1;o<=7;o++)if(!(e+o<=-1||this.moduleCount<=e+o))for(var r=-1;r<=7;r++)t+r<=-1||this.moduleCount<=t+r||(this.modules[e+o][t+r]=0<=o&&o<=6&&(0==r||6==r)||0<=r&&r<=6&&(0==o||6==o)||2<=o&&o<=4&&2<=r&&r<=4)},getBestMaskPattern:function(){for(var e=0,t=0,o=0;o<8;o++){this.makeImpl(!0,o);var r=L.getLostPoint(this);(0==o||e>r)&&(e=r,t=o)}return t},createMovieClip:function(e,t,o){var r=e.createEmptyMovieClip(t,o);this.make();for(var n=0;n<this.modules.length;n++)for(var a=1*n,i=0;i<this.modules[n].length;i++){var l=1*i;this.modules[n][i]&&(r.beginFill(0,100),r.moveTo(l,a),r.lineTo(l+1,a),r.lineTo(l+1,a+1),r.lineTo(l,a+1),r.endFill())}return r},setupTimingPattern:function(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0);for(var t=8;t<this.moduleCount-8;t++)null==this.modules[6][t]&&(this.modules[6][t]=t%2==0)},setupPositionAdjustPattern:function(){for(var e=L.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var o=0;o<e.length;o++){var r=e[t],n=e[o];if(null==this.modules[r][n])for(var a=-2;a<=2;a++)for(var i=-2;i<=2;i++)this.modules[r+a][n+i]=-2==a||2==a||-2==i||2==i||0==a&&0==i}},setupTypeNumber:function(e){for(var t=L.getBCHTypeNumber(this.typeNumber),o=0;o<18;o++){var r=!e&&1==(t>>o&1);this.modules[Math.floor(o/3)][o%3+this.moduleCount-8-3]=r}for(var n=0;n<18;n++){var a=!e&&1==(t>>n&1);this.modules[n%3+this.moduleCount-8-3][Math.floor(n/3)]=a}},setupTypeInfo:function(e,t){for(var o=this.errorCorrectLevel<<3|t,r=L.getBCHTypeInfo(o),n=0;n<15;n++){var a=!e&&1==(r>>n&1);n<6?this.modules[n][8]=a:n<8?this.modules[n+1][8]=a:this.modules[this.moduleCount-15+n][8]=a}for(var i=0;i<15;i++){var l=!e&&1==(r>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=l:i<9?this.modules[8][15-i-1+1]=l:this.modules[8][15-i-1]=l}this.modules[this.moduleCount-8][8]=!e},mapData:function(e,t){for(var o=-1,r=this.moduleCount-1,n=7,a=0,i=this.moduleCount-1;i>0;i-=2)for(6==i&&i--;;){for(var l=0;l<2;l++)if(null==this.modules[r][i-l]){var u=!1;a<e.length&&(u=1==(e[a]>>>n&1)),L.getMask(t,r,i-l)&&(u=!u),this.modules[r][i-l]=u,-1==--n&&(a++,n=7)}if((r+=o)<0||this.moduleCount<=r){r-=o,o=-o;break}}}},E.PAD0=236,E.PAD1=17,E.createData=function(e,t,o){for(var r=w.getRSBlocks(e,t),n=new m,a=0;a<o.length;a++){var i=o[a];n.put(i.mode,4),n.put(i.getLength(),L.getLengthInBits(i.mode,e)),i.write(n)}for(var l=0,u=0;u<r.length;u++)l+=r[u].dataCount;if(n.getLengthInBits()>8*l)throw new Error("code length overflow. ("+n.getLengthInBits()+">"+8*l+")");for(n.getLengthInBits()+4<=8*l&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(!1);for(;!(n.getLengthInBits()>=8*l||(n.put(E.PAD0,8),n.getLengthInBits()>=8*l));)n.put(E.PAD1,8);return E.createBytes(n,r)},E.createBytes=function(e,t){for(var o=0,r=0,n=0,a=new Array(t.length),i=new Array(t.length),l=0;l<t.length;l++){var u=t[l].dataCount,g=t[l].totalCount-u;r=Math.max(r,u),n=Math.max(n,g),a[l]=new Array(u);for(var s=0;s<a[l].length;s++)a[l][s]=255&e.buffer[s+o];o+=u;var f=L.getErrorCorrectPolynomial(g),h=new k(a[l],f.getLength()-1).mod(f);i[l]=new Array(f.getLength()-1);for(var c=0;c<i[l].length;c++){var d=c+h.getLength()-i[l].length;i[l][c]=d>=0?h.get(d):0}}for(var v=0,P=0;P<t.length;P++)v+=t[P].totalCount;for(var b=new Array(v),m=0,I=0;I<r;I++)for(var y=0;y<t.length;y++)I<a[y].length&&(b[m++]=a[y][I]);for(var p=0;p<n;p++)for(var C=0;C<t.length;C++)p<i[C].length&&(b[m++]=i[C][p]);return b};var O={};function j(e,t,o){return{imageReady:function(e){var t={},o=Object.entries(e).map((function(e){return new Promise((function(o){var r=x(e,2),n=r[0],a=r[1];if(O[a]&&O[a].width)t[n]=O[a],o();else{var i=new Image;i.src=a,i.onload=function(){t[n]=i,O[a]=i,o()}}}))}));return o.length?Promise.all(o).then((function(){return t})):Promise.resolve({})},getValue:function(e,o){var r;return null==t||null===(r=t[e])||void 0===r?void 0:r[o]},isPositionPoint:function(e,o){if(!t)return!1;var r=t.length,n=0;return e>=2&&e<5&&o>=2&&o<5?n=1:e<7&&o<7?n=2:e>=r-5&&e<r-2&&o>=2&o<5?n=1:e>=r-7&&e<r&&o>=0&o<7?n=2:e>=2&&e<5&&o>=r-5&o<r-2?n=1:e>=0&&e<7&&o>=r-7&o<r&&(n=2),n},getRangeTrue:function(e,o,r,n){var a=!0;if(t){t.length;for(var i=e;i<e+r;i++)for(var l=o;l<o+n;l++)1!=this.getValue(i,l)&&(a=!1);return a}return!1},getRangeFalse:function(e,o,r,n){var a=!0;if(t){t.length;for(var i=e;i<e+r;i++)for(var l=o;l<o+n;l++)this.getValue(i,l)&&(a=!1);return a}return!1},setRangeDisabled:function(e,o,r,n){if(!t)return!1;for(var a=t.length,i=e;i<e+r;i++)for(var l=o;l<o+n;l++)i<0||l<0||i>=a||l>=a||(t[i][l]=2)},getImageBrush:function(t){var o,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"full";if(t.width>e.canvas.width||t.height>e.canvas.height||"full"===r){var n=document.createElement("canvas"),a=n.getContext("2d");t.width>e.canvas.width&&t.height>e.canvas.height?t.width/t.height<e.canvas.width/e.canvas.height?(n.width=e.canvas.width,n.height=t.height/t.width*e.canvas.width):(n.width=t.width/t.height*e.canvas.height,n.height=e.canvas.height):t.width>e.canvas.width?(n.width=e.canvas.width,n.height=t.height/t.width*e.canvas.width):(n.width=t.width/t.height*e.canvas.height,n.height=e.canvas.height),a.drawImage(t,-6,-6,n.width,n.height),o=e.createPattern(n,"repeat")}else o=e.createPattern(t,"repeat");return o},drawRightAngle:function(t,o,r,n){var a,i;switch(r){case 0:a=t*n,i=o*n,e.lineTo(a,i);break;case 1:a=t*n+n,i=o*n,e.lineTo(a,i);break;case 2:a=t*n+n,i=o*n+n,e.lineTo(a,i);break;case 3:a=t*n,i=o*n+n,e.lineTo(a,i)}},drawRoundBrick:function(t,o,r,n){var a,i,l=n/2;switch(r){case 0:a=t*n+l,i=o*n+l,e.arc(a,i,l,Math.PI,1.5*Math.PI,!1);break;case 1:a=t*n+n-l,i=o*n+l,e.arc(a,i,l,1.5*Math.PI,2*Math.PI,!1);break;case 2:a=t*n+n-l,i=o*n+n-l,e.arc(a,i,l,0,Math.PI/2,!1);break;case 3:a=t*n+l,i=o*n+n-l,e.arc(a,i,l,Math.PI/2,Math.PI,!1)}},fillRound:function(t,o,r,n){var a,i,l=n/2;switch(e.beginPath(),r){case 0:a=t*n+l,i=o*n+l,e.arc(a,i,l,Math.PI,1.5*Math.PI,!1),a=t*n,i=o*n;break;case 1:a=t*n+n-l,i=o*n+l,e.arc(a,i,l,1.5*Math.PI,2*Math.PI,!1),a=t*n+n,i=o*n;break;case 2:a=t*n+n-l,i=o*n+n-l,e.arc(a,i,l,0,Math.PI/2,!1),a=t*n+n,i=o*n+n;break;case 3:a=t*n+l,i=o*n+n-l,e.arc(a,i,l,Math.PI/2,Math.PI,!1),a=t*n,i=o*n+n}e.lineTo(a,i),e.closePath(),e.fill(),e.stroke()},setText:function(){if(o.text){var t=Math.ceil(e.canvas.height/12.5),r=Math.ceil(e.canvas.height/50);e.textAlign="center",e.textBaseline="middle",e.font="bold ".concat(t,"px 微软雅黑"),e.lineWidth=r,e.strokeStyle=o.textStroke||"#ffffff",e.strokeText(o.text,e.canvas.width/2,e.canvas.height/2),e.fillStyle=o.textColor||"#000000",e.fillText(o.text,e.canvas.width/2,e.canvas.height/2)}},setLogo:function(t){var o=Math.ceil(e.canvas.width/4),r=(e.canvas.width-o)/2,n=(e.canvas.height-o)/2;e.drawImage(t,r,n,o,o)}}}var H={eye_default:function(e,t,o){for(var r=t.length,n=.05*e.canvas.width,a=(e.canvas.width-2*n)/r,i=j(e,t,o),l=0;l<r;l++)for(var u=0;u<r;u++)i.isPositionPoint(l,u)&&i.getValue(l,u)&&e.fillRect(Math.ceil(l*a)-.5,Math.ceil(u*a)-.5,Math.ceil(a)+1,Math.ceil(a)+1)},eye_water:function(e,t,o,r){for(var n=t.length,a=.05*e.canvas.width,i=(e.canvas.width-2*a)/n,l=j(e,t,o),u=0;u<n;u++)for(var g=0;g<n;g++)if(l.isPositionPoint(u,g))if(l.getValue(u,g)){var s=u*i,f=g*i+i/2;e.beginPath(),e.moveTo(s,f),l.getValue(u-1,g)||l.getValue(u,g-1)||l.getValue(u-1,g-1)?l.drawRightAngle(u,g,0,i):l.drawRoundBrick(u,g,0,i),l.getValue(u,g-1)||l.getValue(u+1,g)||l.getValue(u+1,g-1)?l.drawRightAngle(u,g,1,i):l.drawRoundBrick(u,g,1,i),l.getValue(u,g+1)||l.getValue(u+1,g)||l.getValue(u+1,g+1)?l.drawRightAngle(u,g,2,i):l.drawRoundBrick(u,g,2,i),l.getValue(u,g+1)||l.getValue(u-1,g)||l.getValue(u-1,g+1)?l.drawRightAngle(u,g,3,i):l.drawRoundBrick(u,g,3,i),e.closePath(),e.fill(),e.stroke()}else l.isPositionPoint(u,g,n)||(l.getValue(u,g-1)&&l.getValue(u-1,g)&&l.fillRound(u,g,0,i),l.getValue(u,g+1)&&l.getValue(u-1,g)&&l.fillRound(u,g,3,i),l.getValue(u,g+1)&&l.getValue(u+1,g)&&l.fillRound(u,g,2,i),l.getValue(u,g-1)&&l.getValue(u+1,g)&&l.fillRound(u,g,1,i))},eye_star:function(e,t,o,r){var n=t.length,a=.05*e.canvas.width,i=(e.canvas.width-2*a)/n,l=j(e,t,o);o.backgroundColor;var u=(o.foregroundColor||"#000000").split(","),g=u[0];!o.foregroundColor&&r.foregroundImage&&(g=l.getImageBrush(r.foregroundImage));var s=o.innerColor||(null==u?void 0:u[1])||g,f=o.outerColor||g;!o.backgroundColor&&r.backgroundImage&&l.getImageBrush(r.backgroundImage);for(var h=function(t,o,r){var n=.6*r,a=.55*r;e.beginPath();for(var i=0;i<5;i++)e.lineTo(t+Math.cos((18+72*i)/180*Math.PI)*n+a,o-Math.sin((18+72*i)/180*Math.PI)*n+a),e.lineTo(t+.4*Math.cos((54+72*i)/180*Math.PI)*n+a,o-.4*Math.sin((54+72*i)/180*Math.PI)*n+a);e.closePath(),e.fill()},c=0;c<n;c++)for(var d=0;d<n;d++)if(l.isPositionPoint(c,d)&&1==l.getValue(c,d)){if(1==l.isPositionPoint(c,d))e.fillStyle=s;else if(2==l.isPositionPoint(c,d))e.fillStyle=f;else{var v=u[(c+d)%u.length];!o.foregroundColor&&r.foregroundImage&&(v=g),e.fillStyle=v}l.getRangeTrue(c,d,3,3)?(h(c*i-.55*i,d*i-.45*i,3.8*i),l.setRangeDisabled(c,d,3,3)):l.getRangeTrue(c,d,2,2)?(h(c*i-.15*i,d*i-.12*i,2*i),l.setRangeDisabled(c,d,2,2)):h(c*i,d*i,i)}},eye_rect:function(e,t,o,r){var n=t.length,a=.05*e.canvas.width,i=(e.canvas.width-2*a)/n,l=j(e,t,o),u=o.backgroundColor||"#ffffff",g=(o.foregroundColor||"#000000").split(","),s=g[0];!o.foregroundColor&&r.foregroundImage&&(s=l.getImageBrush(r.foregroundImage));var f=o.innerColor||(null==g?void 0:g[1])||s,h=o.outerColor||s,c=u;!o.backgroundColor&&r.backgroundImage&&(c=l.getImageBrush(r.backgroundImage));for(var d=0;d<n;d++)for(var v=0;v<n;v++)if(l.isPositionPoint(d,v)&&1==l.getValue(d,v)){if(1==l.isPositionPoint(d,v))e.fillStyle=f;else if(2==l.isPositionPoint(d,v))e.fillStyle=h;else{var P=g[(d+v)%g.length];!o.foregroundColor&&r.foregroundImage&&(P=s),e.fillStyle=P}l.isPositionPoint(d,v)?(e.fillRect(d*i,v*i,7*i,7*i),e.fillStyle=c,e.fillRect(d*i+i,v*i+i,5*i,5*i),e.fillStyle=f,e.beginPath(),e.moveTo((d+3.5)*i,(v+1)*i),e.lineTo((d+6)*i,(v+3.5)*i),e.lineTo((d+3.5)*i,(v+6)*i),e.lineTo((d+1)*i,(v+3.5)*i),e.closePath(),e.fill(),l.setRangeDisabled(d,v,7,7)):l.getRangeTrue(d,v,1,1)&&l.getRangeTrue(d-1,v+1,3,1)&&l.getRangeTrue(d,v+2,1,1)?(e.beginPath(),e.moveTo((d+.5)*i,v*i),e.lineTo((d+2)*i,(v+1.5)*i),e.lineTo((d+.5)*i,(v+3)*i),e.lineTo((d-1)*i,(v+1.5)*i),e.closePath(),e.fill(),l.setRangeDisabled(d,v,1,1),l.setRangeDisabled(d-1,v+1,3,1),l.setRangeDisabled(d,v+2,1,1)):l.getRangeTrue(d,v,3,2)?(e.fillRect(d*i,v*i,3*i,2*i),l.setRangeDisabled(d,v,3,2)):l.getRangeTrue(d,v,2,3)?(e.fillRect(d*i,v*i,2*i,3*i),l.setRangeDisabled(d,v,2,3)):l.getRangeTrue(d,v,2,2)&&(e.fillRect(d*i,v*i,2*i,2*i),l.setRangeDisabled(d,v,2,2))}for(var b=0;b<n;b++)for(var m=0;m<n;m++)if(l.isPositionPoint(b,m)&&1==l.getValue(b,m)){if(1==l.isPositionPoint(b,m))e.fillStyle=f;else if(2==l.isPositionPoint(b,m))e.fillStyle=h;else{var I=g[(b+m)%g.length];!o.foregroundColor&&r.foregroundImage&&(I=s),e.fillStyle=I}2!=l.getValue(b-1,m)&&2!=l.getValue(b,m-1)&&2!=l.getValue(b+1,m)&&2!=l.getValue(b,m+1)?(b+m)%2?(e.beginPath(),e.moveTo((b+.5)*i,m*i),e.lineTo((b+1)*i,(m+.5)*i),e.lineTo((b+.5)*i,(m+1)*i),e.lineTo(b*i,(m+.5)*i),e.closePath(),e.fill()):(e.fillRect(b*i,m*i,i,i),l.setRangeDisabled(b,m,1,1)):(e.beginPath(),e.moveTo((b+.5)*i,m*i),e.lineTo((b+1)*i,(m+.5)*i),e.lineTo((b+.5)*i,(m+1)*i),e.lineTo(b*i,(m+.5)*i),e.closePath(),e.fill())}},eye_diamond:function(e,t,o){for(var r=t.length,n=.05*e.canvas.width,a=(e.canvas.width-2*n)/r,i=j(e,t,o),l=0;l<r;l++)for(var u=0;u<r;u++)i.isPositionPoint(l,u)&&(i.getValue(l,u)?(e.beginPath(),e.moveTo(l*a,u*a+.5*a),(i.getValue(l-1,u)||i.getValue(l,u-1))&&e.lineTo(l*a,u*a),e.lineTo(l*a+.5*a,u*a),(i.getValue(l+1,u)||i.getValue(l,u-1))&&e.lineTo(l*a+a,u*a),e.lineTo(l*a+a,u*a+.5*a),(i.getValue(l+1,u)||i.getValue(l,u+1))&&e.lineTo(l*a+a,u*a+a),e.lineTo(l*a+.5*a,u*a+a),(i.getValue(l-1,u)||i.getValue(l,u+1))&&e.lineTo(l*a,u*a+a),e.closePath(),e.fill(),e.stroke()):(i.getValue(l-1,u)&&i.getValue(l,u-1)&&i.getValue(l-1,u-1)&&(e.beginPath(),e.moveTo(l*a,u*a),e.lineTo(l*a,u*a+.5*a),e.lineTo(l*a+.5*a,u*a),e.closePath(),e.fill(),e.stroke()),i.getValue(l+1,u)&&i.getValue(l,u-1)&&i.getValue(l+1,u-1)&&(e.beginPath(),e.moveTo(l*a+a,u*a),e.lineTo(l*a+a,u*a+.5*a),e.lineTo(l*a+.5*a,u*a),e.closePath(),e.fill(),e.stroke()),i.getValue(l-1,u)&&i.getValue(l,u+1)&&i.getValue(l-1,u+1)&&(e.beginPath(),e.moveTo(l*a,u*a+a),e.lineTo(l*a,u*a+.5*a),e.lineTo(l*a+.5*a,u*a+a),e.closePath(),e.fill(),e.stroke()),i.getValue(l+1,u)&&i.getValue(l,u+1)&&i.getValue(l+1,u+1)&&(e.beginPath(),e.moveTo(l*a+a,u*a+a),e.lineTo(l*a+a,u*a+.5*a),e.lineTo(l*a+.5*a,u*a+a),e.closePath(),e.fill(),e.stroke())))},eye_hexagon:function(e,t,o,r){var n=t.length,a=.05*e.canvas.width,i=(e.canvas.width-2*a)/n,l=j(e,t,o),u=o.backgroundColor||"#ffffff",g=(o.foregroundColor||"#000000").split(","),s=g[0];!o.foregroundColor&&r.foregroundImage&&(s=l.getImageBrush(r.foregroundImage));var f=o.innerColor||(null==g?void 0:g[1])||s,h=o.outerColor||s,c=u;!o.backgroundColor&&r.backgroundImage&&(c=l.getImageBrush(r.backgroundImage));for(var d=0;d<n;d++)for(var v=0;v<n;v++)if(l.isPositionPoint(d,v)&&1==l.getValue(d,v)){if(1==l.isPositionPoint(d,v))e.fillStyle=f,e.strokeStyle=f;else if(2==l.isPositionPoint(d,v))e.fillStyle=h,e.strokeStyle=h;else{var P=g[(d+v)%g.length];!o.foregroundColor&&r.foregroundImage&&(P=s),e.fillStyle=P,e.strokeStyle=P}e.beginPath(),e.moveTo(d*i,v*i+1.5*i),e.lineTo(d*i+3.5*i,v*i),e.lineTo(d*i+7*i,v*i+1.5*i),e.lineTo(d*i+7*i,v*i+5.5*i),e.lineTo(d*i+3.5*i,v*i+7*i),e.lineTo(d*i,v*i+5.5*i),e.closePath(),e.fill(),e.stroke(),e.fillStyle=c,e.strokeStyle=c,e.beginPath(),e.moveTo(d*i+i,v*i+2*i+1/14*i),e.lineTo(d*i+3.5*i,v*i+1*i),e.lineTo(d*i+6*i,v*i+2*i+1/14*i),e.lineTo(d*i+6*i,v*i+5*i-1/14*i),e.lineTo(d*i+3.5*i,v*i+6*i),e.lineTo(d*i+1*i,v*i+5*i-1/14*i),e.closePath(),e.fill(),e.stroke(),e.fillStyle=f,e.strokeStyle=f,e.beginPath(),e.moveTo(d*i+2*i,v*i+3*i-5/14*i),e.lineTo(d*i+3.5*i,v*i+2*i),e.lineTo(d*i+5*i,v*i+3*i-5/14*i),e.lineTo(d*i+5*i,v*i+4*i+5/14*i),e.lineTo(d*i+3.5*i,v*i+5*i),e.lineTo(d*i+2*i,v*i+4*i+5/14*i),e.closePath(),e.fill(),e.stroke(),l.setRangeDisabled(d,v,7,7)}},eye_bar:function(e,t,o,r){var n=t.length,a=.05*e.canvas.width,i=(e.canvas.width-2*a)/n,l=j(e,t,o),u=o.backgroundColor||"#ffffff",g=(o.foregroundColor||"#000000").split(","),s=g[0];!o.foregroundColor&&r.foregroundImage&&(s=l.getImageBrush(r.foregroundImage));var f=o.innerColor||(null==g?void 0:g[1])||s,h=u;!o.backgroundColor&&r.backgroundImage&&(h=l.getImageBrush(r.backgroundImage));for(var c=function(t){for(var o=function(o){if(!l.isPositionPoint(t,o))return 1;1==l.getValue(t,o)&&(l.isPositionPoint(t,o)?(e.beginPath(),e.arc((t+3)*i+.5*i,(o+3)*i+.5*i,3.5*i,0,2*Math.PI),e.closePath(),e.fill(),e.fillStyle=h,e.beginPath(),e.arc((t+3)*i+.5*i,(o+3)*i+.5*i,2.5*i,0,2*Math.PI),e.closePath(),e.fill(),e.fillStyle=f,e.beginPath(),e.arc((t+3)*i+.5*i,(o+3)*i+.5*i,1.5*i,0,2*Math.PI),e.closePath(),e.fill(),l.setRangeDisabled(t,o,7,7)):[[4,4],[4,3],[4,3],[4,1],[3,4],[3,3],[3,2],[3,1],[2,4],[2,3],[2,2],[2,1],[1,4],[1,3],[1,2],[1,1]].forEach((function(r){var n,a,u,g;l.getRangeTrue(t,o,r[0],r[1])&&(n=t,a=o,u=r[0],g=r[1],e.beginPath(),e.arc(n*i+.5*i,a*i+.5*i,.4*i,1*Math.PI,1.5*Math.PI),e.arc((n+u-1)*i,a*i,.4*i,1.5*Math.PI,0*Math.PI),e.arc((n+u-1)*i,(a+g-1)*i,.4*i,0*Math.PI,.5*Math.PI),e.arc(n*i,(a+g-1)*i,.4*i,.5*Math.PI,1*Math.PI),e.closePath(),e.fill(),l.setRangeDisabled(n,a,u,g))})))},r=0;r<n;r++)o(r)},d=0;d<n;d++)c(d)},eye_heart:function(e,t,o,r){var n=t.length,a=.05*e.canvas.width,i=(e.canvas.width-2*a)/n,l=a,u=a,g=j(e,t,o);o.backgroundColor;var s=(o.foregroundColor||"#000000").split(","),f=s[0];!o.foregroundColor&&r.foregroundImage&&(f=g.getImageBrush(r.foregroundImage));var h=o.innerColor||(null==s?void 0:s[1])||f,c=o.outerColor||f;!o.backgroundColor&&r.backgroundImage&&g.getImageBrush(r.backgroundImage);for(var d=i,v=0;v<n;v++)for(var P=0;P<n;P++)if(g.isPositionPoint(v,P)&&1==g.getValue(v,P)){if(e.save(),1==g.isPositionPoint(v,P))e.fillStyle=h;else if(2==g.isPositionPoint(v,P))e.fillStyle=c;else{var b=s[(v+P)%s.length];!o.foregroundColor&&r.foregroundImage&&(b=f),e.fillStyle=b}g.getRangeTrue(v,P,3,3)?(d=.92*i,e.translate(l+(v-.55)*i,u+(P-1.05)*i),e.beginPath(),e.arc(-d,0,d,Math.PI,0,!1),e.arc(d,0,d,Math.PI,0,!1),e.bezierCurveTo(1.9*d,1.2*d,.6*d,1.6*d,0,3*d),e.bezierCurveTo(-.6*d,1.6*d,-1.9*d,1.2*d,-2*d,0),e.closePath(),e.fill(),g.setRangeDisabled(v,P,3,3)):g.getRangeTrue(v,P,2,2)?(d=.5*i,e.translate(l+(v-1)*i,u+(P-1.1)*i),e.beginPath(),e.arc(-d,0,d,Math.PI,0,!1),e.arc(d,0,d,Math.PI,0,!1),e.bezierCurveTo(1.9*d,1.2*d,.6*d,1.6*d,0,3*d),e.bezierCurveTo(-.6*d,1.6*d,-1.9*d,1.2*d,-2*d,0),e.closePath(),e.fill(),g.setRangeDisabled(v,P,2,2)):(d=.25*i,e.translate(l+(v-1.5)*i,u+(P-1.5)*i),e.beginPath(),e.arc(-d,0,d,Math.PI,0,!1),e.arc(d,0,d,Math.PI,0,!1),e.bezierCurveTo(1.9*d,1.2*d,.6*d,1.6*d,0,3*d),e.bezierCurveTo(-.6*d,1.6*d,-1.9*d,1.2*d,-2*d,0),e.closePath(),e.fill()),e.restore()}},eye_glitter:function(e,t,o,r){var n=t.length,a=.05*e.canvas.width,i=(e.canvas.width-2*a)/n,l=j(e,t,o),u=o.backgroundColor||"#ffffff",g=(o.foregroundColor||"#000000").split(","),s=g[0];!o.foregroundColor&&r.foregroundImage&&(s=l.getImageBrush(r.foregroundImage));var f=o.innerColor||(null==g?void 0:g[1])||s,h=o.outerColor||s,c=u;!o.backgroundColor&&r.backgroundImage&&(c=l.getImageBrush(r.backgroundImage)),e.fillStyle=g[0];for(var d=0;d<n;d++)for(var v=0;v<n;v++)if(l.isPositionPoint(d,v)){if(1==l.isPositionPoint(d,v))e.fillStyle=f;else if(2==l.isPositionPoint(d,v))e.fillStyle=h;else{var P=g[(d+v)%g.length];!o.foregroundColor&&r.foregroundImage&&(P=s),e.fillStyle=P}1==l.getValue(d,v)&&(l.isPositionPoint(d,v)?(e.beginPath(),e.arc((d+3.5)*i,(v+3.5)*i,3.5*i,0,2*Math.PI),e.closePath(),e.fill(),e.fillStyle=c,e.beginPath(),e.arc((d+3.5)*i,(v+3.5)*i,2.6*i,0,2*Math.PI),e.closePath(),e.fill(),e.fillStyle=f,e.beginPath(),e.arc((d+1)*i,(v+1)*i,2.5*i,0,.5*Math.PI),e.arc((d+6)*i,(v+1)*i,2.5*i,.5*Math.PI,Math.PI),e.arc((d+6)*i,(v+5)*i+i,2.5*i,Math.PI,1.5*Math.PI),e.arc((d+1)*i,(v+5)*i+i,2.5*i,1.5*Math.PI,2*Math.PI),e.closePath(),e.fill(),l.setRangeDisabled(d,v,7,7)):(d+v)%2?(e.beginPath(),e.arc(d*i,v*i,.5*i,0,.5*Math.PI),e.arc(d*i+i,v*i,.5*i,.5*Math.PI,Math.PI),e.arc(d*i+i,v*i+i,.5*i,Math.PI,1.5*Math.PI),e.arc(d*i,v*i+i,.5*i,1.5*Math.PI,2*Math.PI),e.closePath(),e.fill()):(e.beginPath(),e.arc((d+.5)*i,(v+.5)*i,.5*i,0,2*Math.PI),e.closePath(),e.fill()))}},eye_fusion:function(e,t,o,r){var n=t.length,a=.05*e.canvas.width,i=(e.canvas.width-2*a)/n,l=j(e,t,o),u=o.backgroundColor||"#ffffff",g=o.foregroundColor||"#000000",s=g.split(","),f=s[0],h=o.innerColor||g,c=o.outerColor||g;if(r.backgroundImage&&(g=g.replace(/#([0-9a-fA-F]{6}).*/,"#$188"),u=u.replace(/#([0-9a-fA-F]{6}).*/,"#$188"),h=h.replace(/#([0-9a-fA-F]{6}).*/,"#$188"),c=c.replace(/#([0-9a-fA-F]{6}).*/,"#$188")),!o.foregroundColor&&r.foregroundImage&&(f=l.getImageBrush(r.foregroundImage)),s.length>1){var d=e.createLinearGradient(0,0,e.canvas.width,e.canvas.height),v=s.length-1;s.forEach((function(e,t){d.addColorStop(t/v,e)})),f=d}for(var P=f||h,b=f||c,m=r.backgroundImage?l.getImageBrush(r.backgroundImage):u,I=0;I<n;I++)for(var y=0;y<n;y++)if(l.isPositionPoint(I,y))if(l.isPositionPoint(I,y))1==l.getValue(I,y)&&(e.fillStyle=b,e.fillRect(I*i,y*i,7*i,7*i),e.fillStyle=m,e.fillRect((I+1)*i,(y+1)*i,5*i,5*i),e.fillStyle=u,e.fillRect((I+1)*i,(y+1)*i,5*i,5*i),e.fillStyle=m,e.fillRect((I+2)*i,(y+2)*i,3*i,3*i),e.fillStyle=P,e.fillRect((I+2)*i,(y+2)*i,3*i,3*i),l.setRangeDisabled(I,y,7,7));else{var p=1==l.getValue(I,y)?f:u;e.fillStyle=p,e.beginPath(),e.arc(I*i,y*i,.5*i,0,.5*Math.PI),e.arc(I*i+i,y*i,.5*i,.5*Math.PI,Math.PI),e.arc(I*i+i,y*i+i,.5*i,Math.PI,1.5*Math.PI),e.arc(I*i,y*i+i,.5*i,1.5*Math.PI,2*Math.PI),e.closePath(),e.fill()}},eye_stroke:function(e,t,o,r){var n=t.length,a=.05*e.canvas.width,i=(e.canvas.width-2*a)/n,l=j(e,t,o);o.backgroundColor;var u=(o.foregroundColor||"#000000").split(","),g=u[0];!o.foregroundColor&&r.foregroundImage&&(g=l.getImageBrush(r.foregroundImage));var s=o.innerColor||g,f=o.outerColor||(null==u?void 0:u[1])||g;!o.backgroundColor&&r.backgroundImage&&l.getImageBrush(r.backgroundImage),e.fillStyle=u[0];for(var h=0;h<n;h++)for(var c=0;c<n;c++)if(l.isPositionPoint(h,c)&&1==l.getValue(h,c))if(!((h+c)%2)||l.getValue(h-1,c)||l.getValue(h+1,c)||l.getValue(h,c-1)||l.getValue(h,c+1)){for(var d=9;d;d--)for(var v=9;v;v--)if(l.getRangeTrue(h,c,d,v)){e.fillRect((h+.05)*i,(c+.05)*i,(d-.1)*i,(v-.1)*i);break}}else e.beginPath(),e.arc((h+.5)*i,(c+.5)*i,.25*i,0,2*Math.PI),e.closePath(),e.fill();var P=JSON.parse(JSON.stringify(t)),b=function(t,o){if(l.getValue(t,o)&&1==P[t][o]){if(!((t+o)%2)||l.getValue(t-1,o)||l.getValue(t+1,o)||l.getValue(t,o-1)||l.getValue(t,o+1)){for(var r=9;r;r--)for(var n=9;n;n--)if(l.getRangeTrue(t,o,r,n)){e.fillRect((t+.15)*i,(o+.15)*i,(r-.3)*i,(n-.3)*i);break}}else;P[t][o]=2,b(t-1,o),b(t+1,o),b(t,o-1),b(t,o+1)}};e.lineWidth=1;for(var m=0;m<n;m++)for(var I=0;I<n;I++)if(l.isPositionPoint(m,I)&&1==l.getValue(m,I)){if(1==l.isPositionPoint(m,I))e.fillStyle=s;else if(2==l.isPositionPoint(m,I))e.fillStyle=f;else{var y=u[1+m*I%(u.length-1)];!o.foregroundColor&&r.foregroundImage&&(y=g),e.fillStyle=y}b(m,I)}},point_default:function(e,t,o){for(var r=t.length,n=.05*e.canvas.width,a=(e.canvas.width-2*n)/r,i=j(e,t,o),l=0;l<r;l++)for(var u=0;u<r;u++)i.isPositionPoint(l,u)||i.getValue(l,u)&&e.fillRect(Math.ceil(l*a)-.5,Math.ceil(u*a)-.5,Math.ceil(a)+1,Math.ceil(a)+1)},point_water:function(e,t,o,r){for(var n=t.length,a=.05*e.canvas.width,i=(e.canvas.width-2*a)/n,l=j(e,t,o),u=0;u<n;u++)for(var g=0;g<n;g++)if(!l.isPositionPoint(u,g))if(l.getValue(u,g)){var s=u*i,f=g*i+i/2;e.beginPath(),e.moveTo(s,f),l.getValue(u-1,g)||l.getValue(u,g-1)||l.getValue(u-1,g-1)?l.drawRightAngle(u,g,0,i):l.drawRoundBrick(u,g,0,i),l.getValue(u,g-1)||l.getValue(u+1,g)||l.getValue(u+1,g-1)?l.drawRightAngle(u,g,1,i):l.drawRoundBrick(u,g,1,i),l.getValue(u,g+1)||l.getValue(u+1,g)||l.getValue(u+1,g+1)?l.drawRightAngle(u,g,2,i):l.drawRoundBrick(u,g,2,i),l.getValue(u,g+1)||l.getValue(u-1,g)||l.getValue(u-1,g+1)?l.drawRightAngle(u,g,3,i):l.drawRoundBrick(u,g,3,i),e.closePath(),e.fill(),e.stroke()}else l.isPositionPoint(u,g,n)||(l.getValue(u,g-1)&&l.getValue(u-1,g)&&l.fillRound(u,g,0,i),l.getValue(u,g+1)&&l.getValue(u-1,g)&&l.fillRound(u,g,3,i),l.getValue(u,g+1)&&l.getValue(u+1,g)&&l.fillRound(u,g,2,i),l.getValue(u,g-1)&&l.getValue(u+1,g)&&l.fillRound(u,g,1,i))},point_star:function(e,t,o,r){var n=t.length,a=.05*e.canvas.width,i=(e.canvas.width-2*a)/n,l=j(e,t,o);o.backgroundColor;var u=(o.foregroundColor||"#000000").split(","),g=u[0];!o.foregroundColor&&r.foregroundImage&&(g=l.getImageBrush(r.foregroundImage));var s=o.innerColor||(null==u?void 0:u[1])||g;o.outerColor,!o.backgroundColor&&r.backgroundImage&&l.getImageBrush(r.backgroundImage);for(var f=function(t,o,r){var n=.6*r,a=.55*r;e.beginPath();for(var i=0;i<5;i++)e.lineTo(t+Math.cos((18+72*i)/180*Math.PI)*n+a,o-Math.sin((18+72*i)/180*Math.PI)*n+a),e.lineTo(t+.4*Math.cos((54+72*i)/180*Math.PI)*n+a,o-.4*Math.sin((54+72*i)/180*Math.PI)*n+a);e.closePath(),e.fill()},h=0;h<n;h++)for(var c=0;c<n;c++)if(!l.isPositionPoint(h,c)&&1==l.getValue(h,c)){if(1==l.isPositionPoint(h,c))e.fillStyle=s;else if(2==l.isPositionPoint(h,c)){var d=u[(h+c)%u.length],v=o.outerColor||d;e.fillStyle=v}else{var P=u[(h+c)%u.length];!o.foregroundColor&&r.foregroundImage&&(P=g),e.fillStyle=P}l.getRangeTrue(h,c,3,3)?(f(h*i-.55*i,c*i-.45*i,3.8*i),l.setRangeDisabled(h,c,3,3)):l.getRangeTrue(h,c,2,2)?(f(h*i-.15*i,c*i-.12*i,2*i),l.setRangeDisabled(h,c,2,2)):f(h*i,c*i,i)}},point_rect:function(e,t,o,r){var n=t.length,a=.05*e.canvas.width,i=(e.canvas.width-2*a)/n,l=j(e,t,o),u=o.backgroundColor||"#ffffff",g=(o.foregroundColor||"#000000").split(","),s=g[0];!o.foregroundColor&&r.foregroundImage&&(s=l.getImageBrush(r.foregroundImage));var f=o.innerColor||(null==g?void 0:g[1])||s,h=o.outerColor||s,c=u;!o.backgroundColor&&r.backgroundImage&&(c=l.getImageBrush(r.backgroundImage));for(var d=0;d<n;d++)for(var v=0;v<n;v++)if(!l.isPositionPoint(d,v)&&1==l.getValue(d,v)){if(1==l.isPositionPoint(d,v))e.fillStyle=f;else if(2==l.isPositionPoint(d,v))e.fillStyle=h;else{var P=g[(d+v)%g.length];!o.foregroundColor&&r.foregroundImage&&(P=s),e.fillStyle=P}l.isPositionPoint(d,v)?(e.fillRect(d*i,v*i,7*i,7*i),e.fillStyle=c,e.fillRect(d*i+i,v*i+i,5*i,5*i),e.fillStyle=f,e.beginPath(),e.moveTo((d+3.5)*i,(v+1)*i),e.lineTo((d+6)*i,(v+3.5)*i),e.lineTo((d+3.5)*i,(v+6)*i),e.lineTo((d+1)*i,(v+3.5)*i),e.closePath(),e.fill(),l.setRangeDisabled(d,v,7,7)):l.getRangeTrue(d,v,1,1)&&l.getRangeTrue(d-1,v+1,3,1)&&l.getRangeTrue(d,v+2,1,1)?(e.beginPath(),e.moveTo((d+.5)*i,v*i),e.lineTo((d+2)*i,(v+1.5)*i),e.lineTo((d+.5)*i,(v+3)*i),e.lineTo((d-1)*i,(v+1.5)*i),e.closePath(),e.fill(),l.setRangeDisabled(d,v,1,1),l.setRangeDisabled(d-1,v+1,3,1),l.setRangeDisabled(d,v+2,1,1)):l.getRangeTrue(d,v,3,2)?(e.fillRect(d*i,v*i,3*i,2*i),l.setRangeDisabled(d,v,3,2)):l.getRangeTrue(d,v,2,3)?(e.fillRect(d*i,v*i,2*i,3*i),l.setRangeDisabled(d,v,2,3)):l.getRangeTrue(d,v,2,2)&&(e.fillRect(d*i,v*i,2*i,2*i),l.setRangeDisabled(d,v,2,2))}for(var b=0;b<n;b++)for(var m=0;m<n;m++)if(!l.isPositionPoint(b,m)&&1==l.getValue(b,m)){if(1==l.isPositionPoint(b,m))e.fillStyle=f;else if(2==l.isPositionPoint(b,m))e.fillStyle=h;else{var I=g[(b+m)%g.length];!o.foregroundColor&&r.foregroundImage&&(I=s),e.fillStyle=I}2!=l.getValue(b-1,m)&&2!=l.getValue(b,m-1)&&2!=l.getValue(b+1,m)&&2!=l.getValue(b,m+1)?(b+m)%2?(e.beginPath(),e.moveTo((b+.5)*i,m*i),e.lineTo((b+1)*i,(m+.5)*i),e.lineTo((b+.5)*i,(m+1)*i),e.lineTo(b*i,(m+.5)*i),e.closePath(),e.fill()):(e.fillRect(b*i,m*i,i,i),l.setRangeDisabled(b,m,1,1)):(e.beginPath(),e.moveTo((b+.5)*i,m*i),e.lineTo((b+1)*i,(m+.5)*i),e.lineTo((b+.5)*i,(m+1)*i),e.lineTo(b*i,(m+.5)*i),e.closePath(),e.fill())}},point_diamond:function(e,t,o){for(var r=t.length,n=.05*e.canvas.width,a=(e.canvas.width-2*n)/r,i=j(e,t,o),l=0;l<r;l++)for(var u=0;u<r;u++)i.isPositionPoint(l,u)||(i.getValue(l,u)?(e.beginPath(),e.moveTo(l*a,u*a+.5*a),(i.getValue(l-1,u)||i.getValue(l,u-1))&&e.lineTo(l*a,u*a),e.lineTo(l*a+.5*a,u*a),(i.getValue(l+1,u)||i.getValue(l,u-1))&&e.lineTo(l*a+a,u*a),e.lineTo(l*a+a,u*a+.5*a),(i.getValue(l+1,u)||i.getValue(l,u+1))&&e.lineTo(l*a+a,u*a+a),e.lineTo(l*a+.5*a,u*a+a),(i.getValue(l-1,u)||i.getValue(l,u+1))&&e.lineTo(l*a,u*a+a),e.closePath(),e.fill(),e.stroke()):(i.getValue(l-1,u)&&i.getValue(l,u-1)&&i.getValue(l-1,u-1)&&(e.beginPath(),e.moveTo(l*a,u*a),e.lineTo(l*a,u*a+.5*a),e.lineTo(l*a+.5*a,u*a),e.closePath(),e.fill(),e.stroke()),i.getValue(l+1,u)&&i.getValue(l,u-1)&&i.getValue(l+1,u-1)&&(e.beginPath(),e.moveTo(l*a+a,u*a),e.lineTo(l*a+a,u*a+.5*a),e.lineTo(l*a+.5*a,u*a),e.closePath(),e.fill(),e.stroke()),i.getValue(l-1,u)&&i.getValue(l,u+1)&&i.getValue(l-1,u+1)&&(e.beginPath(),e.moveTo(l*a,u*a+a),e.lineTo(l*a,u*a+.5*a),e.lineTo(l*a+.5*a,u*a+a),e.closePath(),e.fill(),e.stroke()),i.getValue(l+1,u)&&i.getValue(l,u+1)&&i.getValue(l+1,u+1)&&(e.beginPath(),e.moveTo(l*a+a,u*a+a),e.lineTo(l*a+a,u*a+.5*a),e.lineTo(l*a+.5*a,u*a+a),e.closePath(),e.fill(),e.stroke())))},point_hexagon:function(e,t,o,r){var n=t.length,a=.05*e.canvas.width,i=(e.canvas.width-2*a)/n,l=j(e,t,o);o.backgroundColor;var u=(o.foregroundColor||"#000000").split(","),g=u[0];!o.foregroundColor&&r.foregroundImage&&(g=l.getImageBrush(r.foregroundImage)),!o.backgroundColor&&r.backgroundImage&&l.getImageBrush(r.backgroundImage);for(var s=1.5,f=0;f<n;f++)for(var h=0;h<n;h++)if(!l.isPositionPoint(f,h)&&1==l.getValue(f,h)){var c=u[(f+h)%u.length];!o.foregroundColor&&r.foregroundImage&&(c=g),e.fillStyle=c,e.strokeStyle=c,e.beginPath(),f%2?(e.moveTo(f*i-i/s+.5*i,h*i+.25*i),e.lineTo(f*i-i/s/2+.5*i,h*i-.25*i),e.lineTo(f*i+i/s/2+.5*i,h*i-.25*i),e.lineTo(f*i+i/s+.5*i,h*i+.25*i),e.lineTo(f*i+i/s/2+.5*i,h*i+.75*i),e.lineTo(f*i-i/s/2+.5*i,h*i+.75*i)):(e.moveTo(f*i-i/s+.5*i,h*i+.75*i),e.lineTo(f*i-i/s/2+.5*i,h*i+.25*i),e.lineTo(f*i+i/s/2+.5*i,h*i+.25*i),e.lineTo(f*i+i/s+.5*i,h*i+.75*i),e.lineTo(f*i+i/s/2+.5*i,h*i+1.25*i),e.lineTo(f*i-i/s/2+.5*i,h*i+1.25*i)),e.closePath(),e.fill(),e.stroke()}},point_bar:function(e,t,o,r){var n=t.length,a=.05*e.canvas.width,i=(e.canvas.width-2*a)/n,l=j(e,t,o),u=o.backgroundColor||"#ffffff",g=(o.foregroundColor||"#000000").split(","),s=g[0];!o.foregroundColor&&r.foregroundImage&&(s=l.getImageBrush(r.foregroundImage));var f=o.innerColor||(null==g?void 0:g[1])||s,h=u;!o.backgroundColor&&r.backgroundImage&&(h=l.getImageBrush(r.backgroundImage));for(var c=function(t){for(var o=function(o){if(l.isPositionPoint(t,o))return 1;1==l.getValue(t,o)&&(l.isPositionPoint(t,o)?(e.beginPath(),e.arc((t+3)*i+.5*i,(o+3)*i+.5*i,3.5*i,0,2*Math.PI),e.closePath(),e.fill(),e.fillStyle=h,e.beginPath(),e.arc((t+3)*i+.5*i,(o+3)*i+.5*i,2.5*i,0,2*Math.PI),e.closePath(),e.fill(),e.fillStyle=f,e.beginPath(),e.arc((t+3)*i+.5*i,(o+3)*i+.5*i,1.5*i,0,2*Math.PI),e.closePath(),e.fill(),l.setRangeDisabled(t,o,7,7)):[[4,4],[4,3],[4,3],[4,1],[3,4],[3,3],[3,2],[3,1],[2,4],[2,3],[2,2],[2,1],[1,4],[1,3],[1,2],[1,1]].forEach((function(r){var n,a,u,g;l.getRangeTrue(t,o,r[0],r[1])&&(n=t,a=o,u=r[0],g=r[1],e.beginPath(),e.arc(n*i+.5*i,a*i+.5*i,.4*i,1*Math.PI,1.5*Math.PI),e.arc((n+u-1)*i+.5*i,a*i+.5*i,.4*i,1.5*Math.PI,0*Math.PI),e.arc((n+u-1)*i+.5*i,(a+g-1)*i+.5*i,.4*i,0*Math.PI,.5*Math.PI),e.arc(n*i+.5*i,(a+g-1)*i+.5*i,.4*i,.5*Math.PI,1*Math.PI),e.closePath(),e.fill(),l.setRangeDisabled(n,a,u,g))})))},r=0;r<n;r++)o(r)},d=0;d<n;d++)c(d)},point_heart:function(e,t,o,r){var n=t.length,a=.05*e.canvas.width,i=(e.canvas.width-2*a)/n,l=a,u=a,g=j(e,t,o);o.backgroundColor;var s=(o.foregroundColor||"#000000").split(","),f=s[0];!o.foregroundColor&&r.foregroundImage&&(f=g.getImageBrush(r.foregroundImage));var h=o.innerColor||(null==s?void 0:s[1])||f,c=o.outerColor||f;!o.backgroundColor&&r.backgroundImage&&g.getImageBrush(r.backgroundImage);for(var d=i,v=0;v<n;v++)for(var P=0;P<n;P++)if(!g.isPositionPoint(v,P)&&1==g.getValue(v,P)){if(e.save(),1==g.isPositionPoint(v,P))e.fillStyle=h;else if(2==g.isPositionPoint(v,P))e.fillStyle=c;else{var b=s[(v+P)%s.length];!o.foregroundColor&&r.foregroundImage&&(b=f),e.fillStyle=b}g.getRangeTrue(v,P,3,3)?(d=.92*i,e.translate(l+(v-.55)*i,u+(P-1.05)*i),e.beginPath(),e.arc(-d,0,d,Math.PI,0,!1),e.arc(d,0,d,Math.PI,0,!1),e.bezierCurveTo(1.9*d,1.2*d,.6*d,1.6*d,0,3*d),e.bezierCurveTo(-.6*d,1.6*d,-1.9*d,1.2*d,-2*d,0),e.closePath(),e.fill(),g.setRangeDisabled(v,P,3,3)):g.getRangeTrue(v,P,2,2)?(d=.5*i,e.translate(l+(v-1)*i,u+(P-1.1)*i),e.beginPath(),e.arc(-d,0,d,Math.PI,0,!1),e.arc(d,0,d,Math.PI,0,!1),e.bezierCurveTo(1.9*d,1.2*d,.6*d,1.6*d,0,3*d),e.bezierCurveTo(-.6*d,1.6*d,-1.9*d,1.2*d,-2*d,0),e.closePath(),e.fill(),g.setRangeDisabled(v,P,2,2)):(d=.25*i,e.translate(l+(v-1.5)*i,u+(P-1.5)*i),e.beginPath(),e.arc(-d,0,d,Math.PI,0,!1),e.arc(d,0,d,Math.PI,0,!1),e.bezierCurveTo(1.9*d,1.2*d,.6*d,1.6*d,0,3*d),e.bezierCurveTo(-.6*d,1.6*d,-1.9*d,1.2*d,-2*d,0),e.closePath(),e.fill()),e.restore()}},point_glitter:function(e,t,o,r){var n=t.length,a=.05*e.canvas.width,i=(e.canvas.width-2*a)/n,l=j(e,t,o),u=o.backgroundColor||"#ffffff",g=(o.foregroundColor||"#000000").split(","),s=g[0];!o.foregroundColor&&r.foregroundImage&&(s=l.getImageBrush(r.foregroundImage));var f=o.innerColor||(null==g?void 0:g[1])||s,h=o.outerColor||s,c=u;!o.backgroundColor&&r.backgroundImage&&(c=l.getImageBrush(r.backgroundImage)),e.fillStyle=g[0];for(var d=0;d<n;d++)for(var v=0;v<n;v++)if(!l.isPositionPoint(d,v)){if(1==l.isPositionPoint(d,v))e.fillStyle=f;else if(2==l.isPositionPoint(d,v))e.fillStyle=h;else{var P=g[(d+v)%g.length];!o.foregroundColor&&r.foregroundImage&&(P=s),e.fillStyle=P}1==l.getValue(d,v)&&(l.isPositionPoint(d,v)?(e.beginPath(),e.arc((d+3.5)*i,(v+3.5)*i,3.75*i,0,2*Math.PI),e.closePath(),e.fill(),e.fillStyle=c,e.beginPath(),e.arc((d+3.5)*i,(v+3.5)*i,2.8*i,0,2*Math.PI),e.closePath(),e.fill(),e.fillStyle=f,e.beginPath(),e.arc((d+1)*i,(v+1)*i,2.5*i,0,.5*Math.PI),e.arc((d+6)*i,(v+1)*i,2.5*i,.5*Math.PI,Math.PI),e.arc((d+6)*i,(v+5)*i+i,2.5*i,Math.PI,1.5*Math.PI),e.arc((d+1)*i,(v+5)*i+i,2.5*i,1.5*Math.PI,2*Math.PI),e.closePath(),e.fill(),l.setRangeDisabled(d,v,7,7)):(d+v)%2?(e.beginPath(),e.arc(d*i,v*i,.5*i,0,.5*Math.PI),e.arc(d*i+i,v*i,.5*i,.5*Math.PI,Math.PI),e.arc(d*i+i,v*i+i,.5*i,Math.PI,1.5*Math.PI),e.arc(d*i,v*i+i,.5*i,1.5*Math.PI,2*Math.PI),e.closePath(),e.fill()):(e.beginPath(),e.arc((d+.5)*i,(v+.5)*i,.5*i,0,2*Math.PI),e.closePath(),e.fill()))}},point_fusion:function(e,t,o,r){var n=t.length,a=.05*e.canvas.width,i=(e.canvas.width-2*a)/n,l=j(e,t,o),u=o.backgroundColor||"#ffffff",g=o.foregroundColor||"#000000",s=g.split(","),f=s[0],h=o.innerColor||g,c=o.outerColor||g;r.backgroundImage&&(g=g.replace(/#([0-9a-fA-F]{6}).*/,"#$188"),u=u.replace(/#([0-9a-fA-F]{6}).*/,"#$188"),h=h.replace(/#([0-9a-fA-F]{6}).*/,"#$188"),c=c.replace(/#([0-9a-fA-F]{6}).*/,"#$188"));var d=h||f,v=c||f;if(!o.foregroundColor&&r.foregroundImage&&(f=l.getImageBrush(r.foregroundImage)),s.length>1){var P=e.createLinearGradient(0,0,e.canvas.width,e.canvas.height),b=s.length-1;s.forEach((function(e,t){P.addColorStop(t/b,e)})),f=P}for(var m=r.backgroundImage?l.getImageBrush(r.backgroundImage):u,I=0;I<n;I++)for(var y=0;y<n;y++)if(!l.isPositionPoint(I,y))if(l.isPositionPoint(I,y))1==l.getValue(I,y)&&(e.fillStyle=v,e.fillRect(I*i,y*i,7*i,7*i),e.fillStyle=m,e.fillRect((I+1)*i,(y+1)*i,5*i,5*i),e.fillStyle=u,e.fillRect((I+1)*i,(y+1)*i,5*i,5*i),e.fillStyle=m,e.fillRect((I+2)*i,(y+2)*i,3*i,3*i),e.fillStyle=d,e.fillRect((I+2)*i,(y+2)*i,3*i,3*i),l.setRangeDisabled(I,y,7,7));else{var p=1==l.getValue(I,y)?f:u;e.fillStyle=p,e.beginPath(),e.arc(I*i,y*i,.5*i,0,.5*Math.PI),e.arc(I*i+i,y*i,.5*i,.5*Math.PI,Math.PI),e.arc(I*i+i,y*i+i,.5*i,Math.PI,1.5*Math.PI),e.arc(I*i,y*i+i,.5*i,1.5*Math.PI,2*Math.PI),e.closePath(),e.fill()}},point_stroke:function(e,t,o,r){var n=t.length,a=.05*e.canvas.width,i=(e.canvas.width-2*a)/n,l=j(e,t,o);o.backgroundColor;var u=(o.foregroundColor||"#000000").split(","),g=u[0];!o.foregroundColor&&r.foregroundImage&&(g=l.getImageBrush(r.foregroundImage));var s=o.innerColor||g,f=o.outerColor||(null==u?void 0:u[1])||g;!o.backgroundColor&&r.backgroundImage&&l.getImageBrush(r.backgroundImage),e.fillStyle=u[0];for(var h=0;h<n;h++)for(var c=0;c<n;c++)if(!l.isPositionPoint(h,c)&&1==l.getValue(h,c))if(!((h+c)%2)||l.getValue(h-1,c)||l.getValue(h+1,c)||l.getValue(h,c-1)||l.getValue(h,c+1)){for(var d=9;d;d--)for(var v=9;v;v--)if(l.getRangeTrue(h,c,d,v)){e.fillRect((h+.05)*i,(c+.05)*i,(d-.1)*i,(v-.1)*i);break}}else e.beginPath(),e.arc((h+.5)*i,(c+.5)*i,.25*i,0,2*Math.PI),e.closePath(),e.fill();var P=JSON.parse(JSON.stringify(t)),b=function(t,o){if(l.getValue(t,o)&&1==P[t][o]){if(!((t+o)%2)||l.getValue(t-1,o)||l.getValue(t+1,o)||l.getValue(t,o-1)||l.getValue(t,o+1)){for(var r=9;r;r--)for(var n=9;n;n--)if(l.getRangeTrue(t,o,r,n)){e.fillRect((t+.15)*i,(o+.15)*i,(r-.3)*i,(n-.3)*i);break}}else;P[t][o]=2,b(t-1,o),b(t+1,o),b(t,o-1),b(t,o+1)}};e.lineWidth=1;for(var m=0;m<n;m++)for(var I=0;I<n;I++)if(!l.isPositionPoint(m,I)&&1==l.getValue(m,I)){if(1==l.isPositionPoint(m,I))e.fillStyle=s;else if(2==l.isPositionPoint(m,I))e.fillStyle=f;else{var y=u[1+m*I%(u.length-1)];!o.foregroundColor&&r.foregroundImage&&(y=g),e.fillStyle=y}b(m,I)}}};const z=new CSSStyleSheet;function N(e,t,o){return t=l(t),i(e,$()?Reflect.construct(t,o||[],l(e).constructor):t.apply(e,o))}function $(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return($=function(){return!!e})()}z.replaceSync(':host {\n    display: inline-table;\n    vertical-align: middle;\n    container-type: inline-size;\n    font-family: Arial,Helvetica,"Microsoft Yahei";\n    font-size: 14px;\n    aspect-ratio: 1;\n}\n\n.mod-qrcode{\n    position: relative;\n    width: 100%;\n    height: 100%;\n}\n.mod-qrcode canvas{\n    width: 100%;\n    height: 100%;\n    background: #ffffff;\n    vertical-align: middle;\n}\n');var G=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=N(this,t)).attachShadow({mode:"open"}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(t,e),r=t,n=[{key:"value",get:function(){return this.getAttribute("value")||"https://code.0xiang.cn/"},set:function(e){return this.setAttribute("value",e)}},{key:"level",get:function(){return this.getAttribute("level")||"H"},set:function(e){return this.setAttribute("level",e)}},{key:"width",get:function(){return+this.getAttribute("width")||0},set:function(e){return this.setAttribute("width",e)}},{key:"height",get:function(){return+this.getAttribute("height")||0},set:function(e){return this.setAttribute("height",e)}},{key:"logo",get:function(){return this.getAttribute("logo")||""},set:function(e){return this.setAttribute("logo",e)}},{key:"text",get:function(){return this.getAttribute("text")||""},set:function(e){return this.setAttribute("text",e)}},{key:"textColor",get:function(){return this.getAttribute("text-color")||""},set:function(e){return this.setAttribute("text-color",e)}},{key:"textStroke",get:function(){return this.getAttribute("text-stroke")||""},set:function(e){return this.setAttribute("text-stroke",e)}},{key:"foregroundImage",get:function(){return this.getAttribute("foreground-image")||""},set:function(e){return this.setAttribute("foreground-image",e)}},{key:"backgroundImage",get:function(){return this.getAttribute("background-image")||""},set:function(e){return this.setAttribute("background-image",e)}},{key:"foregroundColor",get:function(){return this.getAttribute("foreground-color")||""},set:function(e){return this.setAttribute("foreground-color",e)}},{key:"backgroundColor",get:function(){return this.getAttribute("background-color")||""},set:function(e){return this.setAttribute("background-color",e)}},{key:"innerColor",get:function(){return this.getAttribute("inner-color")||""},set:function(e){return this.setAttribute("inner-color",e)}},{key:"outerColor",get:function(){return this.getAttribute("outer-color")||""},set:function(e){return this.setAttribute("outer-color",e)}},{key:"eye",get:function(){return this.getAttribute("eye")||""},set:function(e){return this.setAttribute("eye",e)}},{key:"point",get:function(){return this.getAttribute("point")||""},set:function(e){return this.setAttribute("point",e)}},{key:"attributeChangedCallback",value:function(e,t,o){t!=o&&this.context&&this.drawQRCode()}},{key:"connectedCallback",value:function(){var e=this,t=new CSSStyleSheet;if(t.insertRule(":host{\n            width: ".concat(this.width||300,"px;\n            height: ").concat(this.height||300,"px;\n        }")),e.shadowRoot.adoptedStyleSheets)e.shadowRoot.adoptedStyleSheets=[t,z];else{var r=document.createElement("style");r.rel="stylesheet",r.textContent=[t.cssRules].concat(o(z.cssRules)).map((function(e){return e.cssText})).join(""),e.shadowRoot.appendChild(r)}e.render(),e.drawQRCode(),e.addEventListener("resize",(function(){e.resize()}),!1),navigator.userAgent.includes("Edg/")&&document.addEventListener("visibilitychange",(function(){e.drawQRCode()}))}},{key:"render",value:function(e){var t=this;t.shadowRoot.innerHTML='<div class="mod-qrcode">\n            <canvas></canvas>\n        </div>',t.$module=t.shadowRoot.querySelector(".mod-qrcode"),t.$canvas=t.$module.querySelector("canvas"),t.context=t.$canvas.getContext("2d"),t.resize(),"undefined"!=typeof ResizeObserver&&new ResizeObserver((function(){t.resize()})).observe(t)}},{key:"resize",value:function(){var e=this,t=window.getComputedStyle(e);if(t.width&&t.height){var o=Math.max(parseInt(t.width),parseInt(t.height));e.$canvas.width=2*o,e.$canvas.height=2*o,e.drawQRCode()}}},{key:"drawQRCode",value:function(){var e=this,t=e.logo?"H":e.level,o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"https://code.0xiang.cn/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"H",o=new E(_(e,f[t]),f[t]);return o.addData(e),o.make(),o.modules}(e.value,t);e.context.clearRect(0,0,e.$canvas.width,e.$canvas.height),function(e,t,o){var r=t.length,n=.05*e.canvas.width;e.canvas.width;var a=n,i=n,l=j(e,t,o),u={};o.foregroundImage&&(u.foregroundImage=o.foregroundImage),o.backgroundImage&&(u.backgroundImage=o.backgroundImage),o.logo&&(u.logo=o.logo),l.imageReady(u).then((function(n){var u=o.backgroundColor||"#ffffff",g=(o.foregroundColor||"#000000").split(","),s=g[0];if(!o.foregroundColor&&n.foregroundImage&&(s=l.getImageBrush(n.foregroundImage)),g.length>1){var f=e.createLinearGradient(0,0,e.canvas.width,e.canvas.height),h=g.length-1;g.forEach((function(e,t){f.addColorStop(t/h,e)})),s=f}var c=o.innerColor||s,d=o.outerColor||s,v=u;!o.backgroundColor&&n.backgroundImage&&(v=l.getImageBrush(n.backgroundImage)),e.save(),e.fillStyle=v,e.fillRect(0,0,e.canvas.width,e.canvas.height),e.restore(),e.save(),e.translate(a,i);for(var P=0;P<r;P++)for(var b=0;b<r;b++)1==l.isPositionPoint(P,b)?(e.fillStyle=c,e.strokeStyle=c):2==l.isPositionPoint(P,b)?(e.fillStyle=d,e.strokeStyle=d):(e.fillStyle=s,e.strokeStyle=s);H["eye_".concat(o.eye||"default")](e,t,o,n),H["point_".concat(o.point||"default")](e,t,o,n),e.restore(),e.save(),l.setText(),n.logo&&l.setLogo(n.logo),e.restore()}))}(e.context,o,{foregroundImage:e.foregroundImage,backgroundImage:e.backgroundImage,foregroundColor:e.foregroundColor,backgroundColor:e.backgroundColor,innerColor:e.innerColor,outerColor:e.outerColor,logo:e.logo,text:e.text,textColor:e.textColor,textStroke:e.textStroke,eye:e.eye,point:e.point})}}],i=[{key:"observedAttributes",get:function(){return["value","eye","point","level","width","height","logo","text","text-color","text-stroke","foreground-image","background-image","foreground-color","background-color","inner-color","outer-color"]}}],n&&a(r.prototype,n),i&&a(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,i}(s(HTMLElement));customElements.get("widget-qrcode")||customElements.define("widget-qrcode",G)}));
